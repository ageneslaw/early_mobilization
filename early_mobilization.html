<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.553">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Andrew Geneslaw">

<title>Early mobilization</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="early_mobilization_files/libs/clipboard/clipboard.min.js"></script>
<script src="early_mobilization_files/libs/quarto-html/quarto.js"></script>
<script src="early_mobilization_files/libs/quarto-html/popper.min.js"></script>
<script src="early_mobilization_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="early_mobilization_files/libs/quarto-html/anchor.min.js"></script>
<link href="early_mobilization_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="early_mobilization_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="early_mobilization_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="early_mobilization_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="early_mobilization_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#early-mobilization-retrospective-analysis" id="toc-early-mobilization-retrospective-analysis" class="nav-link active" data-scroll-target="#early-mobilization-retrospective-analysis">Early mobilization retrospective analysis</a></li>
  <li><a href="#initial-setup" id="toc-initial-setup" class="nav-link" data-scroll-target="#initial-setup">Initial setup</a>
  <ul class="collapse">
  <li><a href="#loading-libraries-and-data-paths" id="toc-loading-libraries-and-data-paths" class="nav-link" data-scroll-target="#loading-libraries-and-data-paths">Loading libraries and data paths</a></li>
  <li><a href="#loading-patients-encounters-and-picu-startstop-times" id="toc-loading-patients-encounters-and-picu-startstop-times" class="nav-link" data-scroll-target="#loading-patients-encounters-and-picu-startstop-times">Loading patients, encounters and PICU start/stop times</a></li>
  <li><a href="#invasive-mechanical-ventilation-imv" id="toc-invasive-mechanical-ventilation-imv" class="nav-link" data-scroll-target="#invasive-mechanical-ventilation-imv">Invasive mechanical ventilation (IMV)</a></li>
  <li><a href="#physical-therapy" id="toc-physical-therapy" class="nav-link" data-scroll-target="#physical-therapy">Physical therapy</a>
  <ul class="collapse">
  <li><a href="#amount-of-pt" id="toc-amount-of-pt" class="nav-link" data-scroll-target="#amount-of-pt">Amount of PT</a></li>
  </ul></li>
  <li><a href="#imv-within-24-and-72-hours-of-picu-hospitalization" id="toc-imv-within-24-and-72-hours-of-picu-hospitalization" class="nav-link" data-scroll-target="#imv-within-24-and-72-hours-of-picu-hospitalization">IMV within 24 (and 72) hours of PICU hospitalization</a></li>
  </ul></li>
  <li><a href="#table-1" id="toc-table-1" class="nav-link" data-scroll-target="#table-1">Table 1</a></li>
  </ul>
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="early_mobilization.md"><i class="bi bi-file-code"></i>Github (GFM)</a></li><li><a href="early_mobilization.pdf"><i class="bi bi-file-pdf"></i>PDF</a></li></ul></div></nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">Early mobilization</h1><button type="button" class="btn code-tools-button" id="quarto-code-tools-source"><i class="bi"></i></button></div></div>
</div>


<div class="quarto-title-meta-author">
  <div class="quarto-title-meta-heading">Author</div>
  <div class="quarto-title-meta-heading">Affiliation</div>
  
    <div class="quarto-title-meta-contents">
    <p class="author">Andrew Geneslaw, MD, MS <a href="mailto:asg2195@cumc.columbia.edu" class="quarto-title-author-email"><i class="bi bi-envelope"></i></a> <a href="https://orcid.org/0000-0003-1859-2369" class="quarto-title-author-orcid"> <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg=="></a></p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            Columbia University Irving Medical Center
          </p>
      </div>
  </div>

<div class="quarto-title-meta">

      
  
    
  </div>
  


</header>


<section id="early-mobilization-retrospective-analysis" class="level1">
<h1>Early mobilization retrospective analysis</h1>
<p>This project will assess the delivery of physical therapy to critically ill children at the Morgan Stanley Children’s Hospital in New York City. We are interested in whether physical therapy is being delivered within 72 hours of admission to the PICU. Physical therapy within 72 hours will be referred to from here out as “Early mobilization” or EM.</p>
</section>
<section id="initial-setup" class="level1">
<h1>Initial setup</h1>
<section id="loading-libraries-and-data-paths" class="level2">
<h2 class="anchored" data-anchor-id="loading-libraries-and-data-paths">Loading libraries and data paths</h2>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(chonyepicdata)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(janitor)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gtsummary)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(kableExtra)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">scipen =</span> <span class="dv">3</span>)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Load configuration files. You may need to edit the file (located in a config folder) with your own filepath.</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Alternately you can just send in the correct filename.</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="fu">load_config</span>(<span class="at">yml_path =</span> <span class="st">'config/config.yml'</span>, <span class="at">useglobal =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;environment: R_GlobalEnv&gt;</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>data_path <span class="ot">&lt;-</span> data_path_chony</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="loading-patients-encounters-and-picu-startstop-times" class="level2">
<h2 class="anchored" data-anchor-id="loading-patients-encounters-and-picu-startstop-times">Loading patients, encounters and PICU start/stop times</h2>
<p>A patient has a medical record number (MRN) which is persistent across time.</p>
<p>A unique patient MRN can have multiple encounters. An encounter is defined by the variable , which has been renamed for easier typing throughout this project. A patient encounter is a distinct encounter with the CHONY hospital system. An encounter can be inpatient, outpatient, ED, virtual, or not even involve patient contact (such as an attempt to call a patient that fails). For the purposes of this project, all encounters are an inpatient hospitalization. All encounters will have a start and stop date.</p>
<p>During a given hospital encounter (“admission”), a patient may move between multiple inpatient locations. These involve floor locations, PICUs, and operative areas. It also includes “virtual” areas, such as changing locations to a radiology area during a portable x-ray. The patient does not physically move in these circumstances and so we will mostly ignore them.</p>
<p>Because a patient can move multiple times between floor and PICU locations, a given hospital encounter might have multiple PICU admissions. We will break hospital encounters into individual PICU encounters, and each get a unique ID.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># load all encounters</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>df_encounters <span class="ot">&lt;-</span> <span class="fu">load_encounters</span>(<span class="fu">paste0</span>(data_path, fname_encounter))</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove any encounters that were for less than 24 hours</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>df_encounters <span class="ot">&lt;-</span> df_encounters <span class="sc">%&gt;%</span> </span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>     <span class="fu">filter</span>((hospital_discharge_date <span class="sc">-</span> hospital_admission_date)<span class="sc">/</span><span class="fu">ddays</span>(<span class="dv">1</span>) <span class="sc">&gt;=</span> <span class="dv">1</span>)</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>enc_valid <span class="ot">&lt;-</span> df_encounters <span class="sc">%&gt;%</span> <span class="fu">distinct</span>(enc_id) <span class="sc">%&gt;%</span> <span class="fu">pull</span>()</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Now get a set of all PICU start/stop datetimes for these encounters</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>df_picu_startstop <span class="ot">&lt;-</span> <span class="fu">get_picu_intervals</span>(<span class="fu">paste0</span>(data_path, fname_adt)) <span class="sc">%&gt;%</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>     <span class="fu">arrange</span>(mrn, enc_id, icu_start_date)</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove encounters that were less than 24 hours</span></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>df_picu_startstop <span class="ot">&lt;-</span> df_picu_startstop <span class="sc">%&gt;%</span> </span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>     <span class="fu">filter</span>(enc_id <span class="sc">%in%</span> enc_valid)</span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove PICU episodes that were less than 24 hours</span></span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>df_picu_startstop <span class="ot">&lt;-</span> df_picu_startstop <span class="sc">%&gt;%</span> </span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>     <span class="fu">filter</span>((icu_stop_date <span class="sc">-</span> icu_start_date)<span class="sc">/</span><span class="fu">ddays</span>(<span class="dv">1</span>) <span class="sc">&gt;=</span> <span class="dv">1</span>)</span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a>n_mrn <span class="ot">&lt;-</span> <span class="fu">distinct</span>(df_encounters, mrn) <span class="sc">%&gt;%</span> <span class="fu">nrow</span>()</span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a>n_encounters <span class="ot">&lt;-</span> <span class="fu">distinct</span>(df_encounters, enc_id) <span class="sc">%&gt;%</span> <span class="fu">nrow</span>()</span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a>n_picu <span class="ot">&lt;-</span> <span class="fu">distinct</span>(df_picu_startstop, mrn, icu_start_date) <span class="sc">%&gt;%</span> <span class="fu">nrow</span>() </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<table class="table">
<thead>
<tr class="header">
<th></th>
<th>PICU</th>
<th>Encounters</th>
<th>Patients</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>n</strong></td>
<td>3026</td>
<td>3117</td>
<td>2498</td>
</tr>
</tbody>
</table>
<p>Since we are interested primarily in mobilization within the first 72 hours of ICU hospitalization, we should determine how many patients stayed for this long.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>df_picu_stats <span class="ot">&lt;-</span> df_picu_startstop <span class="sc">%&gt;%</span> </span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>     <span class="fu">mutate</span>(<span class="at">los_picu =</span> (icu_stop_date <span class="sc">-</span> icu_start_date)<span class="sc">/</span><span class="fu">ddays</span>(<span class="dv">1</span>),</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>            <span class="at">los_picu_3days =</span> <span class="fu">if_else</span>(los_picu <span class="sc">&gt;=</span> <span class="dv">3</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>))</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>df_encounter_stats <span class="ot">&lt;-</span> df_encounters <span class="sc">%&gt;%</span> </span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>     <span class="fu">mutate</span>(<span class="at">los_hosp =</span> (hospital_discharge_date <span class="sc">-</span> hospital_admission_date)<span class="sc">/</span><span class="fu">ddays</span>(<span class="dv">1</span>),</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">los_hosp_3days =</span> <span class="fu">if_else</span>(los_hosp <span class="sc">&gt;=</span><span class="dv">3</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>))</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>df_picu_stats <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> los_picu)) <span class="sc">+</span> </span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>     <span class="fu">geom_histogram</span>() <span class="sc">+</span> </span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>     <span class="fu">scale_x_log10</span>(<span class="at">n.breaks =</span> <span class="dv">8</span>) <span class="sc">+</span> </span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>     <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">'Days (log10 axis)'</span>,</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>          <span class="at">y =</span> <span class="st">'N'</span>,</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>          <span class="at">title =</span> <span class="st">'PICU LOS'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="early_mobilization_files/figure-html/72%20hour%20LOS-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>df_encounter_stats <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> los_hosp)) <span class="sc">+</span> </span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>     <span class="fu">geom_histogram</span>() <span class="sc">+</span> </span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>     <span class="fu">scale_x_log10</span>(<span class="at">n.breaks =</span> <span class="dv">8</span>) <span class="sc">+</span> </span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>     <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">'Days (log10 axis)'</span>,</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>          <span class="at">y =</span> <span class="st">'N'</span>,</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>          <span class="at">title =</span> <span class="st">'Hospital LOS'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="early_mobilization_files/figure-html/72%20hour%20LOS-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(<span class="fu">tabyl</span>(df_picu_stats, los_picu_3days),</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>      <span class="at">format =</span> <span class="st">"markdown"</span>, </span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>      <span class="at">align =</span> <span class="st">"c"</span>,</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">caption =</span> <span class="st">"PICU admissions with PICU LOS at least 72 hours"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<caption>PICU admissions with PICU LOS at least 72 hours</caption>
<thead>
<tr class="header">
<th style="text-align: center;">los_picu_3days</th>
<th style="text-align: center;">n</th>
<th style="text-align: center;">percent</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">FALSE</td>
<td style="text-align: center;">1460</td>
<td style="text-align: center;">0.4824851</td>
</tr>
<tr class="even">
<td style="text-align: center;">TRUE</td>
<td style="text-align: center;">1566</td>
<td style="text-align: center;">0.5175149</td>
</tr>
</tbody>
</table>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(<span class="fu">tabyl</span>(df_encounter_stats, los_hosp_3days), </span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>      <span class="at">format =</span> <span class="st">"markdown"</span>, </span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>      <span class="at">align =</span> <span class="st">"c"</span>,</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">caption =</span> <span class="st">"Encounters with hospital LOS at least 72 hours"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<caption>Encounters with hospital LOS at least 72 hours</caption>
<thead>
<tr class="header">
<th style="text-align: center;">los_hosp_3days</th>
<th style="text-align: center;">n</th>
<th style="text-align: center;">percent</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">FALSE</td>
<td style="text-align: center;">651</td>
<td style="text-align: center;">0.2088547</td>
</tr>
<tr class="even">
<td style="text-align: center;">TRUE</td>
<td style="text-align: center;">2466</td>
<td style="text-align: center;">0.7911453</td>
</tr>
</tbody>
</table>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># df_stats &lt;- left_join(df_picu_stats, df_encounter_stats)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="invasive-mechanical-ventilation-imv" class="level2">
<h2 class="anchored" data-anchor-id="invasive-mechanical-ventilation-imv">Invasive mechanical ventilation (IMV)</h2>
<p>Understanding the numbers of patients receiving IMV, and the timing of IMV, is essential to the study.</p>
<p>First we will load data. This takes time, so we will separate it from other processing so it can be cached.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get ventilator data and just limit to patient encounters we are interested in</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>df_vent <span class="ot">&lt;-</span> <span class="fu">load_resp_support</span>(<span class="fu">paste0</span>(data_path, fname_imv))</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>df_vent_wide <span class="ot">&lt;-</span> <span class="fu">clean_resp_support</span>(df_vent)</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>df_resp_episodes <span class="ot">&lt;-</span> <span class="fu">classify_resp_support</span>(df_vent_wide)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Cleaning and arranging data by levels of support..."
[1] "Finding changed levels of support..."
[1] "Finding start/stop times of changed support levels..."
[1] "Cleaning episodes shorter than [min_ep_duration] hours and stitching adjacent ones together.."</code></pre>
</div>
</div>
<p>Now, we will get some counts.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Only keep IMV data, and relabel each episode number</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>df_vent_episodes <span class="ot">&lt;-</span> df_resp_episodes <span class="sc">%&gt;%</span> <span class="fu">filter</span>(current_support <span class="sc">==</span> <span class="st">'imv'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>     <span class="fu">rename</span>(<span class="at">vent_time_start =</span> support_time_start,</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">vent_time_stop =</span> support_time_stop,</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">vent_episode =</span> support_episode) </span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Only keep vent episodes for at least 24 hours</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>df_vent_episodes <span class="ot">&lt;-</span> df_vent_episodes <span class="sc">%&gt;%</span> </span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>     <span class="fu">filter</span>(timediff <span class="sc">&gt;=</span> <span class="fu">hours</span>(<span class="dv">24</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>     <span class="fu">group_by</span>(enc_id) <span class="sc">%&gt;%</span></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>     <span class="fu">arrange</span>(vent_episode) <span class="sc">%&gt;%</span></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>     <span class="fu">mutate</span>(<span class="at">vent_episode =</span> <span class="fu">row_number</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>     <span class="fu">ungroup</span>()</span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Join based on encounter ID, and whether the intervals for (vent start, vent stop) and (icu start, icu stop) have any overlap. This ensures we include patients intubated in the ED or a procedural area</span></span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>by <span class="ot">&lt;-</span> <span class="fu">join_by</span>(enc_id, </span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>              <span class="fu">overlaps</span>(x<span class="sc">$</span>vent_time_start, x<span class="sc">$</span>vent_time_stop,</span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>                       y<span class="sc">$</span>icu_start_date, y<span class="sc">$</span>icu_stop_date))</span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>df_vent_episodes <span class="ot">&lt;-</span> <span class="fu">inner_join</span>(df_vent_episodes, df_picu_startstop, by) <span class="sc">%&gt;%</span></span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a>     <span class="fu">inner_join</span>(df_encounters, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">'mrn'</span>, <span class="st">'enc_id'</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a>     <span class="fu">relocate</span>(mrn, enc_id)</span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a><span class="co"># How many ventilator episodes, encounters, and among unique patients?</span></span>
<span id="cb12-25"><a href="#cb12-25" aria-hidden="true" tabindex="-1"></a>n_vent_ep <span class="ot">&lt;-</span> df_vent_episodes <span class="sc">%&gt;%</span> <span class="fu">nrow</span>()</span>
<span id="cb12-26"><a href="#cb12-26" aria-hidden="true" tabindex="-1"></a>n_vent_picu <span class="ot">&lt;-</span> df_vent_episodes <span class="sc">%&gt;%</span> <span class="fu">distinct</span>(icu_start_date) <span class="sc">%&gt;%</span> <span class="fu">nrow</span>()</span>
<span id="cb12-27"><a href="#cb12-27" aria-hidden="true" tabindex="-1"></a>n_vent_mrn <span class="ot">&lt;-</span> df_vent_episodes <span class="sc">%&gt;%</span> <span class="fu">distinct</span>(mrn) <span class="sc">%&gt;%</span> <span class="fu">nrow</span>()</span>
<span id="cb12-28"><a href="#cb12-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-29"><a href="#cb12-29" aria-hidden="true" tabindex="-1"></a>display_array <span class="ot">&lt;-</span> <span class="fu">c</span>(n_vent_ep, n_vent_picu, n_vent_mrn)</span>
<span id="cb12-30"><a href="#cb12-30" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(display_array) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">'Episodes of IMV'</span>, <span class="st">'PICU stays with IMV'</span>, <span class="st">'Unique patients requiring IMV'</span>)</span>
<span id="cb12-31"><a href="#cb12-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-32"><a href="#cb12-32" aria-hidden="true" tabindex="-1"></a><span class="co"># display_table &lt;- tibble(`Episodes of IMV` = n_vent_ep, </span></span>
<span id="cb12-33"><a href="#cb12-33" aria-hidden="true" tabindex="-1"></a>       <span class="co"># `PICU stays with IMV` = n_vent_picu,</span></span>
<span id="cb12-34"><a href="#cb12-34" aria-hidden="true" tabindex="-1"></a>       <span class="co"># `Unique patients requiring IMV` = n_vent_mrn)</span></span>
<span id="cb12-35"><a href="#cb12-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-36"><a href="#cb12-36" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(display_array, </span>
<span id="cb12-37"><a href="#cb12-37" aria-hidden="true" tabindex="-1"></a>      <span class="at">format =</span> <span class="st">"markdown"</span>, </span>
<span id="cb12-38"><a href="#cb12-38" aria-hidden="true" tabindex="-1"></a>      <span class="at">align =</span> <span class="st">"c"</span>,</span>
<span id="cb12-39"><a href="#cb12-39" aria-hidden="true" tabindex="-1"></a>      <span class="at">caption =</span> <span class="cn">NULL</span>,</span>
<span id="cb12-40"><a href="#cb12-40" aria-hidden="true" tabindex="-1"></a>      <span class="at">col.names =</span> <span class="st">'N'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: center;">N</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Episodes of IMV</td>
<td style="text-align: center;">836</td>
</tr>
<tr class="even">
<td style="text-align: left;">PICU stays with IMV</td>
<td style="text-align: center;">723</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Unique patients requiring IMV</td>
<td style="text-align: center;">576</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="physical-therapy" class="level2">
<h2 class="anchored" data-anchor-id="physical-therapy">Physical therapy</h2>
<p>Physical therapy is logged in flowsheets. For the most part, the physical therapists log the total amount of time they worked. Some physical therapists also log the specific activities they performed (such as gait training, wheel chair training, etc). This may or may not be consistent and will need some QAing.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>df_pt <span class="ot">&lt;-</span> <span class="fu">read_delim</span>(<span class="fu">paste0</span>(data_path, <span class="st">'/Report 8F - Physical Therapy.txt'</span>),</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>                    <span class="at">delim =</span> <span class="st">"|"</span>,</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>                    <span class="at">escape_double =</span> <span class="cn">FALSE</span>,</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>                    <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">PAT_ENC_CSN_ID =</span> <span class="fu">col_character</span>(),</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">MRN =</span> <span class="fu">col_character</span>(),</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">FLOWSHEET_NAME =</span> <span class="fu">col_character</span>(),</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">MEASURE_VALUE =</span> <span class="fu">col_number</span>(),</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">RECORDED_TIME =</span> <span class="fu">col_datetime</span>(<span class="at">format =</span> <span class="st">"%Y-%m-%d %H:%M:%S"</span>)),</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>                    <span class="at">trim_ws =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>     <span class="fu">clean_names</span>() <span class="sc">%&gt;%</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>     <span class="fu">select</span>(mrn, <span class="at">enc_id =</span> pat_enc_csn_id, <span class="fu">everything</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>     <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.character), str_to_lower)) <span class="sc">%&gt;%</span></span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>     <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.character), <span class="sc">~</span> <span class="fu">str_remove_all</span>(.x, <span class="st">'^r nyc '</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>     <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.character), <span class="sc">~</span> <span class="fu">str_remove_all</span>(.x, <span class="st">'^r rhb '</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>     <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.character), <span class="sc">~</span> <span class="fu">str_remove_all</span>(.x, <span class="st">'^rhb '</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>There is a kind of variable called “PT received on” which is where the PT entered the date they supposedly provided PT. However, they always log PT when provided and there are multiple instances of the incorrect date being logged (such as a date in the future). Because of this, we will only use the date at the time PT was logged, rather than what the therapist manually entered. If we do need to use it, the date is recorded as the number of days after 12/31/1840 (unclear why). To convert this to a date, you can use:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mutate</span>(<span class="at">pt_received_on =</span> <span class="fu">days</span>(pt_received_on) <span class="sc">+</span> <span class="fu">ymd</span>(<span class="st">'1840-12-31'</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>There are also many kinds flowsheet rows being documented on. Not all are really relevant to our purposes. They are:</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Print all flowsheet names</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>df_pt <span class="sc">%&gt;%</span> <span class="fu">distinct</span>(flowsheet_name) <span class="sc">%&gt;%</span> <span class="fu">print</span>(<span class="at">n=</span><span class="cn">Inf</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>     <span class="fu">kable</span>(<span class="at">format =</span> <span class="st">'markdown'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 21 x 1
   flowsheet_name                                           
   &lt;chr&gt;                                                    
 1 therapeutic activity time entry                          
 2 ip pt time calculation                                   
 3 pt received on                                           
 4 pt re-evaluation time entry                              
 5 gait training time entry                                 
 6 neuromuscular re-education time entry                    
 7 self care/home management (adls) time entry              
 8 therapeutic exercise time entry                          
 9 therapeutic activity comments                            
10 therapeutic exercise comments                            
11 orthotic management training time entry                  
12 gait training comments                                   
13 cognitive function direct pt contact                     
14 manual therapy time entry                                
15 orthotic/prosthetic management and/or training time entry
16 canalith repositioning time entry                        
17 wheelchair management time entry                         
18 pt eval treat tolerance                                  
19 group therapy time entry                                 
20 prosthetic training time entry                           
21 therapeutic massage time entry                           </code></pre>
</div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">flowsheet_name</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">therapeutic activity time entry</td>
</tr>
<tr class="even">
<td style="text-align: left;">ip pt time calculation</td>
</tr>
<tr class="odd">
<td style="text-align: left;">pt received on</td>
</tr>
<tr class="even">
<td style="text-align: left;">pt re-evaluation time entry</td>
</tr>
<tr class="odd">
<td style="text-align: left;">gait training time entry</td>
</tr>
<tr class="even">
<td style="text-align: left;">neuromuscular re-education time entry</td>
</tr>
<tr class="odd">
<td style="text-align: left;">self care/home management (adls) time entry</td>
</tr>
<tr class="even">
<td style="text-align: left;">therapeutic exercise time entry</td>
</tr>
<tr class="odd">
<td style="text-align: left;">therapeutic activity comments</td>
</tr>
<tr class="even">
<td style="text-align: left;">therapeutic exercise comments</td>
</tr>
<tr class="odd">
<td style="text-align: left;">orthotic management training time entry</td>
</tr>
<tr class="even">
<td style="text-align: left;">gait training comments</td>
</tr>
<tr class="odd">
<td style="text-align: left;">cognitive function direct pt contact</td>
</tr>
<tr class="even">
<td style="text-align: left;">manual therapy time entry</td>
</tr>
<tr class="odd">
<td style="text-align: left;">orthotic/prosthetic management and/or training time entry</td>
</tr>
<tr class="even">
<td style="text-align: left;">canalith repositioning time entry</td>
</tr>
<tr class="odd">
<td style="text-align: left;">wheelchair management time entry</td>
</tr>
<tr class="even">
<td style="text-align: left;">pt eval treat tolerance</td>
</tr>
<tr class="odd">
<td style="text-align: left;">group therapy time entry</td>
</tr>
<tr class="even">
<td style="text-align: left;">prosthetic training time entry</td>
</tr>
<tr class="odd">
<td style="text-align: left;">therapeutic massage time entry</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Most of these differentiate the amount of time spent on a given task. It’s not always clear which of these are active versus passive in terms of participation of the patient. Some also seem irrelevant. We will dictate all of the relevant ones as:</p>
<ul>
<li><p>therapeutic activity time entry</p></li>
<li><p>ip pt time calculation</p></li>
<li><p>pt re-evaluation time entry</p></li>
<li><p>gait training time entry</p></li>
<li><p>neuromuscular re-education time entry</p></li>
<li><p>self care/home management (adls) time entry</p></li>
<li><p>therapeutic exercise time entry</p></li>
<li><p>therapeutic activity comments</p></li>
<li><p>therapeutic exercise comments</p></li>
<li><p>gait training comments</p></li>
<li><p>manual therapy time entry</p></li>
<li><p>orthotic/prosthetic management and/or training time entry</p></li>
<li><p>wheelchair management time entry</p></li>
<li><p>pt eval treat tolerance</p></li>
<li><p>prosthetic training time entry</p></li>
<li><p>therapeutic massage time entry</p></li>
</ul>
<p>(It might seem odd that we are keeping “comments.” The reason is that in a subsequentstep, we enforce that only numeric values are retained. Often the amount of time spent is erroneously entered as a “comment” so we will keep these.)</p>
<p>In the next step, we save all of these types of PT as a wide format data frame. Now we have access to each type of PT in case we need it for later.</p>
<p>The variable <code>ip_pt_time_calculation</code> appears to be the total of all other types of PT being provided. The other units specify the PT being provided, which all sum to this variable. Therefore <code>ip_pt_time_calculation</code> is the most important variable here and the one we will use as the basis for how much PT is provided.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Relevant types of PT rows...</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>relevant_pt <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">'therapeutic activity time entry'</span>,</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>                 <span class="st">'ip pt time calculation'</span>,</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>                 <span class="co"># 'pt received on',</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>                 <span class="st">'pt re-evaluation time entry'</span>,</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>                 <span class="st">'gait training time entry'</span>,</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>                 <span class="st">'neuromuscular re-education time entry'</span>,</span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>                 <span class="st">'self care/home management (adls) time entry'</span>,</span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>                 <span class="st">'therapeutic exercise time entry'</span>,</span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>                 <span class="st">'therapeutic activity comments'</span>,</span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>                 <span class="st">'therapeutic exercise comments'</span>,</span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>                 <span class="co"># 'orthotic management training time entry',</span></span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a>                  <span class="st">'gait training comments'</span>,</span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a>                 <span class="co"># 'cognitive function direct pt contact',</span></span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a>                 <span class="st">'manual therapy time entry'</span>,</span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a>                 <span class="st">'orthotic/prosthetic management and/or training time entry'</span>,</span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a>                 <span class="co"># 'canalith repositioning time entry',</span></span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a>                 <span class="st">'wheelchair management time entry'</span>,</span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a>                 <span class="st">'pt eval treat tolerance'</span>,</span>
<span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a>                 <span class="co"># 'group therapy time entry',</span></span>
<span id="cb17-21"><a href="#cb17-21" aria-hidden="true" tabindex="-1"></a>                 <span class="st">'prosthetic training time entry'</span>,</span>
<span id="cb17-22"><a href="#cb17-22" aria-hidden="true" tabindex="-1"></a>                 <span class="st">'therapeutic massage time entry'</span></span>
<span id="cb17-23"><a href="#cb17-23" aria-hidden="true" tabindex="-1"></a>                 )</span>
<span id="cb17-24"><a href="#cb17-24" aria-hidden="true" tabindex="-1"></a>relevant_pt_str <span class="ot">&lt;-</span> <span class="fu">str_flatten</span>(relevant_pt, <span class="at">collapse =</span> <span class="st">'|'</span>)</span>
<span id="cb17-25"><a href="#cb17-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-26"><a href="#cb17-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Keep only relevant kinds of PT</span></span>
<span id="cb17-27"><a href="#cb17-27" aria-hidden="true" tabindex="-1"></a>df_pt <span class="ot">&lt;-</span> df_pt <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="fu">str_detect</span>(flowsheet_name, relevant_pt_str))</span>
<span id="cb17-28"><a href="#cb17-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-29"><a href="#cb17-29" aria-hidden="true" tabindex="-1"></a><span class="co"># Make sure all types are numeric</span></span>
<span id="cb17-30"><a href="#cb17-30" aria-hidden="true" tabindex="-1"></a>df_pt <span class="ot">&lt;-</span> df_pt <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">measure_value =</span> <span class="fu">as.numeric</span>(measure_value))</span>
<span id="cb17-31"><a href="#cb17-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-32"><a href="#cb17-32" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove any 0-time units</span></span>
<span id="cb17-33"><a href="#cb17-33" aria-hidden="true" tabindex="-1"></a>df_pt <span class="ot">&lt;-</span> df_pt <span class="sc">%&gt;%</span> <span class="fu">filter</span>(measure_value <span class="sc">&gt;</span> <span class="dv">0</span>)</span>
<span id="cb17-34"><a href="#cb17-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-35"><a href="#cb17-35" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert to wide format</span></span>
<span id="cb17-36"><a href="#cb17-36" aria-hidden="true" tabindex="-1"></a>df_pt_wide <span class="ot">&lt;-</span> df_pt <span class="sc">%&gt;%</span></span>
<span id="cb17-37"><a href="#cb17-37" aria-hidden="true" tabindex="-1"></a>     <span class="fu">pivot_wider</span>(<span class="at">id_cols =</span> <span class="fu">c</span>(<span class="st">'mrn'</span>, <span class="st">'enc_id'</span>, <span class="st">'recorded_time'</span>),</span>
<span id="cb17-38"><a href="#cb17-38" aria-hidden="true" tabindex="-1"></a>                 <span class="at">names_from =</span> flowsheet_name,</span>
<span id="cb17-39"><a href="#cb17-39" aria-hidden="true" tabindex="-1"></a>                 <span class="at">values_from =</span> measure_value) <span class="sc">%&gt;%</span></span>
<span id="cb17-40"><a href="#cb17-40" aria-hidden="true" tabindex="-1"></a>     <span class="fu">clean_names</span>()</span>
<span id="cb17-41"><a href="#cb17-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-42"><a href="#cb17-42" aria-hidden="true" tabindex="-1"></a><span class="co"># Just keep a version with total time</span></span>
<span id="cb17-43"><a href="#cb17-43" aria-hidden="true" tabindex="-1"></a>df_pt_total <span class="ot">&lt;-</span> df_pt_wide <span class="sc">%&gt;%</span></span>
<span id="cb17-44"><a href="#cb17-44" aria-hidden="true" tabindex="-1"></a>     <span class="fu">select</span>(mrn, enc_id, recorded_time, <span class="at">pt_time =</span> ip_pt_time_calculation) <span class="sc">%&gt;%</span> </span>
<span id="cb17-45"><a href="#cb17-45" aria-hidden="true" tabindex="-1"></a>     <span class="fu">distinct</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<section id="amount-of-pt" class="level3">
<h3 class="anchored" data-anchor-id="amount-of-pt">Amount of PT</h3>
<p>First we will describe, in general, how much PT is being delivered. We need to make sure that we only sum up PT that was delivered after the start of a PICU stay. To do this we take the <code>df_picu_startstop</code> data frame, which contains ICU admit and discharge times. Create a few windows of time spanning 0-24 hours, 24-48 hours, and 48-72 hours. Also create an interval that spans 0-72 hours.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Update the PICU start/stop so that it has a timestamp and intervals</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="co"># for 24, 48, and 72 hours</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>df_temp <span class="ot">&lt;-</span> df_picu_startstop <span class="sc">%&gt;%</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>     <span class="fu">mutate</span>(<span class="at">t24 =</span> icu_start_date <span class="sc">+</span> <span class="fu">hours</span>(<span class="dv">24</span>),</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">t48 =</span> icu_start_date <span class="sc">+</span> <span class="fu">hours</span>(<span class="dv">48</span>),</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">t72 =</span> icu_start_date <span class="sc">+</span> <span class="fu">hours</span>(<span class="dv">72</span>),</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">int0_72 =</span> <span class="fu">interval</span>(icu_start_date, t72),</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>            <span class="at">int0_24 =</span> <span class="fu">interval</span>(icu_start_date, t24),</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>            <span class="at">int24_48 =</span> <span class="fu">interval</span>(t24, t48),</span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>            <span class="at">int48_72 =</span> <span class="fu">interval</span>(t48, t72)</span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>            )</span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Label the 1st hospitalization</span></span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>df_temp <span class="ot">&lt;-</span> df_temp <span class="sc">%&gt;%</span> </span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>     <span class="fu">group_by</span>(mrn, enc_id) <span class="sc">%&gt;%</span> </span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a>     <span class="fu">arrange</span>(mrn, enc_id, icu_start_date) <span class="sc">%&gt;%</span> </span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a>     <span class="fu">mutate</span>(<span class="at">icu_stay =</span> <span class="fu">row_number</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a>     <span class="fu">ungroup</span>()</span>
<span id="cb18-19"><a href="#cb18-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-20"><a href="#cb18-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Create an inequality join so we make sure to only match PT that occurred after</span></span>
<span id="cb18-21"><a href="#cb18-21" aria-hidden="true" tabindex="-1"></a><span class="co"># the PICU start</span></span>
<span id="cb18-22"><a href="#cb18-22" aria-hidden="true" tabindex="-1"></a>pt_join_by <span class="ot">&lt;-</span> <span class="fu">join_by</span>(mrn, enc_id, x<span class="sc">$</span>icu_start_date <span class="sc">&lt;</span> y<span class="sc">$</span>recorded_time)</span>
<span id="cb18-23"><a href="#cb18-23" aria-hidden="true" tabindex="-1"></a>df_pt_picu <span class="ot">&lt;-</span> <span class="fu">left_join</span>(df_temp, df_pt_total, <span class="at">by =</span> pt_join_by, <span class="at">relationship =</span> <span class="st">"many-to-many"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb18-24"><a href="#cb18-24" aria-hidden="true" tabindex="-1"></a>     <span class="fu">relocate</span>(mrn, enc_id, icu_stay, icu_start_date, icu_stop_date, recorded_time, pt_time)</span>
<span id="cb18-25"><a href="#cb18-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-26"><a href="#cb18-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Only keep 1st hospitalization</span></span>
<span id="cb18-27"><a href="#cb18-27" aria-hidden="true" tabindex="-1"></a><span class="co"># df_pt_picu &lt;- df_pt_picu %&gt;% filter(icu_stay == 1)</span></span>
<span id="cb18-28"><a href="#cb18-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-29"><a href="#cb18-29" aria-hidden="true" tabindex="-1"></a><span class="co"># Determine whether each episode of PT fell in a given interval</span></span>
<span id="cb18-30"><a href="#cb18-30" aria-hidden="true" tabindex="-1"></a>df_pt_timing <span class="ot">&lt;-</span> df_pt_picu <span class="sc">%&gt;%</span></span>
<span id="cb18-31"><a href="#cb18-31" aria-hidden="true" tabindex="-1"></a>     <span class="fu">mutate</span>(<span class="at">early_pt =</span> <span class="fu">if_else</span>(recorded_time <span class="sc">%within%</span> int0_72, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span>),</span>
<span id="cb18-32"><a href="#cb18-32" aria-hidden="true" tabindex="-1"></a>            <span class="at">any_pt =</span> <span class="fu">if_else</span>(recorded_time <span class="sc">&gt;</span> icu_start_date, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span>),</span>
<span id="cb18-33"><a href="#cb18-33" aria-hidden="true" tabindex="-1"></a>            <span class="at">icu_pt =</span> <span class="fu">if_else</span>(recorded_time <span class="sc">%within%</span> <span class="fu">interval</span>(icu_start_date, icu_stop_date), <span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span>),</span>
<span id="cb18-34"><a href="#cb18-34" aria-hidden="true" tabindex="-1"></a>            <span class="at">pt0_24 =</span> <span class="fu">if_else</span>(recorded_time  <span class="sc">%within%</span> int0_24, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span>),</span>
<span id="cb18-35"><a href="#cb18-35" aria-hidden="true" tabindex="-1"></a>            <span class="at">pt24_48 =</span> <span class="fu">if_else</span>(recorded_time <span class="sc">%within%</span> int24_48, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span>),</span>
<span id="cb18-36"><a href="#cb18-36" aria-hidden="true" tabindex="-1"></a>            <span class="at">pt48_72 =</span> <span class="fu">if_else</span>(recorded_time <span class="sc">%within%</span> int48_72, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span>))</span>
<span id="cb18-37"><a href="#cb18-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-38"><a href="#cb18-38" aria-hidden="true" tabindex="-1"></a><span class="co"># Get counts of PT in each interval.</span></span>
<span id="cb18-39"><a href="#cb18-39" aria-hidden="true" tabindex="-1"></a>df_pt_counts <span class="ot">&lt;-</span> df_pt_timing <span class="sc">%&gt;%</span>  </span>
<span id="cb18-40"><a href="#cb18-40" aria-hidden="true" tabindex="-1"></a>     <span class="fu">group_by</span>(mrn, enc_id, icu_start_date) <span class="sc">%&gt;%</span> </span>
<span id="cb18-41"><a href="#cb18-41" aria-hidden="true" tabindex="-1"></a>     <span class="fu">summarize</span>(<span class="at">n_early_pt =</span> <span class="fu">sum</span>(early_pt), </span>
<span id="cb18-42"><a href="#cb18-42" aria-hidden="true" tabindex="-1"></a>               <span class="at">n_icu_pt =</span> <span class="fu">sum</span>(icu_pt), </span>
<span id="cb18-43"><a href="#cb18-43" aria-hidden="true" tabindex="-1"></a>               <span class="at">n_any_pt =</span> <span class="fu">sum</span>(any_pt), </span>
<span id="cb18-44"><a href="#cb18-44" aria-hidden="true" tabindex="-1"></a>               <span class="at">n_pt0_24 =</span> <span class="fu">sum</span>(pt0_24), </span>
<span id="cb18-45"><a href="#cb18-45" aria-hidden="true" tabindex="-1"></a>               <span class="at">n_pt24_48 =</span> <span class="fu">sum</span>(pt24_48), </span>
<span id="cb18-46"><a href="#cb18-46" aria-hidden="true" tabindex="-1"></a>               <span class="at">n_pt48_72 =</span> <span class="fu">sum</span>(pt48_72),</span>
<span id="cb18-47"><a href="#cb18-47" aria-hidden="true" tabindex="-1"></a>               <span class="at">n_pt_each =</span> <span class="fu">sum</span>(<span class="fu">if_else</span>((pt0_24 <span class="sc">&amp;</span> pt24_48) <span class="sc">|</span> (pt0_24 <span class="sc">&amp;</span> pt48_72) <span class="sc">|</span> (pt24_48 <span class="sc">&amp;</span> pt48_72), <span class="cn">TRUE</span>, <span class="cn">FALSE</span>)),</span>
<span id="cb18-48"><a href="#cb18-48" aria-hidden="true" tabindex="-1"></a>               <span class="at">.groups =</span> <span class="st">'drop'</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb18-49"><a href="#cb18-49" aria-hidden="true" tabindex="-1"></a>     <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">starts_with</span>(<span class="st">'n_'</span>), <span class="sc">~</span> <span class="fu">if_else</span>(.x <span class="sc">&gt;</span> <span class="dv">0</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>)))</span>
<span id="cb18-50"><a href="#cb18-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-51"><a href="#cb18-51" aria-hidden="true" tabindex="-1"></a><span class="co"># Get aggregate time of PT delivered in each interval. Need to do this separately because they all have different denominators</span></span>
<span id="cb18-52"><a href="#cb18-52" aria-hidden="true" tabindex="-1"></a>df_early_pt_timesum <span class="ot">&lt;-</span> df_pt_timing <span class="sc">%&gt;%</span> </span>
<span id="cb18-53"><a href="#cb18-53" aria-hidden="true" tabindex="-1"></a>     <span class="fu">filter</span>(early_pt) <span class="sc">%&gt;%</span> </span>
<span id="cb18-54"><a href="#cb18-54" aria-hidden="true" tabindex="-1"></a>     <span class="fu">group_by</span>(mrn, enc_id, icu_start_date) <span class="sc">%&gt;%</span> </span>
<span id="cb18-55"><a href="#cb18-55" aria-hidden="true" tabindex="-1"></a>     <span class="fu">summarize</span>(<span class="at">early_pt_time =</span> <span class="fu">sum</span>(pt_time))</span>
<span id="cb18-56"><a href="#cb18-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-57"><a href="#cb18-57" aria-hidden="true" tabindex="-1"></a>df_icu_pt_timesum <span class="ot">&lt;-</span> df_pt_timing <span class="sc">%&gt;%</span> </span>
<span id="cb18-58"><a href="#cb18-58" aria-hidden="true" tabindex="-1"></a>     <span class="fu">filter</span>(icu_pt) <span class="sc">%&gt;%</span> </span>
<span id="cb18-59"><a href="#cb18-59" aria-hidden="true" tabindex="-1"></a>     <span class="fu">group_by</span>(mrn, enc_id, icu_start_date) <span class="sc">%&gt;%</span> </span>
<span id="cb18-60"><a href="#cb18-60" aria-hidden="true" tabindex="-1"></a>     <span class="fu">summarize</span>(<span class="at">icu_pt_time =</span> <span class="fu">sum</span>(pt_time))</span>
<span id="cb18-61"><a href="#cb18-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-62"><a href="#cb18-62" aria-hidden="true" tabindex="-1"></a>df_any_pt_timesum <span class="ot">&lt;-</span> df_pt_timing <span class="sc">%&gt;%</span> </span>
<span id="cb18-63"><a href="#cb18-63" aria-hidden="true" tabindex="-1"></a>     <span class="fu">filter</span>(any_pt) <span class="sc">%&gt;%</span> </span>
<span id="cb18-64"><a href="#cb18-64" aria-hidden="true" tabindex="-1"></a>     <span class="fu">group_by</span>(mrn, enc_id, icu_start_date) <span class="sc">%&gt;%</span> </span>
<span id="cb18-65"><a href="#cb18-65" aria-hidden="true" tabindex="-1"></a>     <span class="fu">summarize</span>(<span class="at">any_pt_time =</span> <span class="fu">sum</span>(pt_time))</span>
<span id="cb18-66"><a href="#cb18-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-67"><a href="#cb18-67" aria-hidden="true" tabindex="-1"></a><span class="co"># Bind the 3 times together. </span></span>
<span id="cb18-68"><a href="#cb18-68" aria-hidden="true" tabindex="-1"></a>df_pt_timesums <span class="ot">&lt;-</span> <span class="fu">full_join</span>(df_early_pt_timesum, df_icu_pt_timesum) <span class="sc">%&gt;%</span> </span>
<span id="cb18-69"><a href="#cb18-69" aria-hidden="true" tabindex="-1"></a>     <span class="fu">full_join</span>(df_any_pt_timesum)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Now let’s display some findings. First, display counts of ICU stays involving PT at varying time points. Note that that the sum of PT in the 0-24, 24-48, and 42-72 hour ranges can sum to more than the number of patients who received early PT (0-72 hours). This is because a patient could receive PT multiple times in the early range, e.g.&nbsp;at 0-24 and 24-48 hours. They would be counted in each range, but only once total for the 0-72 hour range.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Now display tables of each.</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>df_pt_counts <span class="sc">%&gt;%</span> </span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>     <span class="fu">tbl_summary</span>(<span class="at">include =</span> <span class="fu">starts_with</span>(<span class="st">'n_'</span>),</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>                 <span class="at">label =</span> <span class="fu">list</span>(n_early_pt <span class="sc">~</span> <span class="st">'Early PT (within 72 hours)'</span>,</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>                              n_icu_pt <span class="sc">~</span> <span class="st">'PT any time in the ICU'</span>,</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>                              n_any_pt <span class="sc">~</span> <span class="st">'PT any time in the hospital'</span>,</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>                              n_pt0_24 <span class="sc">~</span> <span class="st">'PT within 0-24 hours'</span>,</span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>                              n_pt24_48 <span class="sc">~</span> <span class="st">'PT within 24-48 hours'</span>,</span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>                              n_pt48_72 <span class="sc">~</span> <span class="st">'PT within 48-72 hours'</span>,</span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>                              n_pt_each <span class="sc">~</span> <span class="st">'Early PT on any 2 days'</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<div id="xpgoyllzai" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#xpgoyllzai table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#xpgoyllzai thead, #xpgoyllzai tbody, #xpgoyllzai tfoot, #xpgoyllzai tr, #xpgoyllzai td, #xpgoyllzai th {
  border-style: none;
}

#xpgoyllzai p {
  margin: 0;
  padding: 0;
}

#xpgoyllzai .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#xpgoyllzai .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#xpgoyllzai .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#xpgoyllzai .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#xpgoyllzai .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#xpgoyllzai .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#xpgoyllzai .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#xpgoyllzai .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#xpgoyllzai .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#xpgoyllzai .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#xpgoyllzai .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#xpgoyllzai .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#xpgoyllzai .gt_spanner_row {
  border-bottom-style: hidden;
}

#xpgoyllzai .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#xpgoyllzai .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#xpgoyllzai .gt_from_md > :first-child {
  margin-top: 0;
}

#xpgoyllzai .gt_from_md > :last-child {
  margin-bottom: 0;
}

#xpgoyllzai .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#xpgoyllzai .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#xpgoyllzai .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#xpgoyllzai .gt_row_group_first td {
  border-top-width: 2px;
}

#xpgoyllzai .gt_row_group_first th {
  border-top-width: 2px;
}

#xpgoyllzai .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#xpgoyllzai .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#xpgoyllzai .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#xpgoyllzai .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#xpgoyllzai .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#xpgoyllzai .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#xpgoyllzai .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#xpgoyllzai .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#xpgoyllzai .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#xpgoyllzai .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#xpgoyllzai .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#xpgoyllzai .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#xpgoyllzai .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#xpgoyllzai .gt_left {
  text-align: left;
}

#xpgoyllzai .gt_center {
  text-align: center;
}

#xpgoyllzai .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#xpgoyllzai .gt_font_normal {
  font-weight: normal;
}

#xpgoyllzai .gt_font_bold {
  font-weight: bold;
}

#xpgoyllzai .gt_font_italic {
  font-style: italic;
}

#xpgoyllzai .gt_super {
  font-size: 65%;
}

#xpgoyllzai .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#xpgoyllzai .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#xpgoyllzai .gt_indent_1 {
  text-indent: 5px;
}

#xpgoyllzai .gt_indent_2 {
  text-indent: 10px;
}

#xpgoyllzai .gt_indent_3 {
  text-indent: 15px;
}

#xpgoyllzai .gt_indent_4 {
  text-indent: 20px;
}

#xpgoyllzai .gt_indent_5 {
  text-indent: 25px;
}
</style>

<table class="gt_table table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="header gt_col_headings">
<th id="<strong>Characteristic</strong>" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col"><strong>Characteristic</strong></th>
<th id="<strong>N = 3,026</strong><span class=&quot;gt_footnote_marks&quot; style=&quot;white-space:nowrap;font-style:italic;font-weight:normal;&quot;><sup>1</sup></span>" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col"><strong>N = 3,026</strong><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span></th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="label">Early PT (within 72 hours)</td>
<td class="gt_row gt_center" headers="stat_0">1,485 (49%)</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">PT any time in the ICU</td>
<td class="gt_row gt_center" headers="stat_0">1,877 (62%)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">PT any time in the hospital</td>
<td class="gt_row gt_center" headers="stat_0">2,370 (78%)</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">PT within 0-24 hours</td>
<td class="gt_row gt_center" headers="stat_0">590 (19%)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">PT within 24-48 hours</td>
<td class="gt_row gt_center" headers="stat_0">852 (28%)</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">PT within 48-72 hours</td>
<td class="gt_row gt_center" headers="stat_0">892 (29%)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">Early PT on any 2 days</td>
<td class="gt_row gt_center" headers="stat_0">4 (0.1%)</td>
</tr>
</tbody><tfoot class="gt_footnotes">
<tr class="even">
<td colspan="2" class="gt_footnote"><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span> n (%)</td>
</tr>
</tfoot>

</table>

</div>
</div>
</div>
</div>
<p>Next, display the amount of PT (in hours) that was received.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>df_pt_timesums <span class="sc">%&gt;%</span> </span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>     <span class="fu">tbl_summary</span>(<span class="at">include =</span> <span class="fu">ends_with</span>(<span class="st">'_time'</span>),</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>                 <span class="at">label =</span> <span class="fu">list</span>(early_pt_time <span class="sc">~</span> <span class="st">'Duration of PT within first 72 hours, minutes'</span>,</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>                              icu_pt_time <span class="sc">~</span> <span class="st">'Duration of PT within ICU, minutes'</span>,</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>                              any_pt_time <span class="sc">~</span> <span class="st">'Duration of PT within the hospital, minutes'</span>),</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>                 <span class="at">missing =</span> <span class="st">'no'</span>,</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>                 <span class="at">statistic =</span> <span class="fu">list</span>(<span class="fu">all_continuous</span>() <span class="sc">~</span> <span class="st">'{median} [{p25}-{p75}] - {N_nonmiss} patients'</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<div id="ugvagjpqkg" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#ugvagjpqkg table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#ugvagjpqkg thead, #ugvagjpqkg tbody, #ugvagjpqkg tfoot, #ugvagjpqkg tr, #ugvagjpqkg td, #ugvagjpqkg th {
  border-style: none;
}

#ugvagjpqkg p {
  margin: 0;
  padding: 0;
}

#ugvagjpqkg .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#ugvagjpqkg .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#ugvagjpqkg .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#ugvagjpqkg .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#ugvagjpqkg .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ugvagjpqkg .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ugvagjpqkg .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ugvagjpqkg .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#ugvagjpqkg .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#ugvagjpqkg .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#ugvagjpqkg .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#ugvagjpqkg .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#ugvagjpqkg .gt_spanner_row {
  border-bottom-style: hidden;
}

#ugvagjpqkg .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#ugvagjpqkg .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#ugvagjpqkg .gt_from_md > :first-child {
  margin-top: 0;
}

#ugvagjpqkg .gt_from_md > :last-child {
  margin-bottom: 0;
}

#ugvagjpqkg .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#ugvagjpqkg .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#ugvagjpqkg .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#ugvagjpqkg .gt_row_group_first td {
  border-top-width: 2px;
}

#ugvagjpqkg .gt_row_group_first th {
  border-top-width: 2px;
}

#ugvagjpqkg .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ugvagjpqkg .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#ugvagjpqkg .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#ugvagjpqkg .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ugvagjpqkg .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ugvagjpqkg .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#ugvagjpqkg .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#ugvagjpqkg .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#ugvagjpqkg .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ugvagjpqkg .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ugvagjpqkg .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ugvagjpqkg .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ugvagjpqkg .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ugvagjpqkg .gt_left {
  text-align: left;
}

#ugvagjpqkg .gt_center {
  text-align: center;
}

#ugvagjpqkg .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#ugvagjpqkg .gt_font_normal {
  font-weight: normal;
}

#ugvagjpqkg .gt_font_bold {
  font-weight: bold;
}

#ugvagjpqkg .gt_font_italic {
  font-style: italic;
}

#ugvagjpqkg .gt_super {
  font-size: 65%;
}

#ugvagjpqkg .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#ugvagjpqkg .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#ugvagjpqkg .gt_indent_1 {
  text-indent: 5px;
}

#ugvagjpqkg .gt_indent_2 {
  text-indent: 10px;
}

#ugvagjpqkg .gt_indent_3 {
  text-indent: 15px;
}

#ugvagjpqkg .gt_indent_4 {
  text-indent: 20px;
}

#ugvagjpqkg .gt_indent_5 {
  text-indent: 25px;
}
</style>

<table class="gt_table table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="header gt_col_headings">
<th id="<strong>Characteristic</strong>" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col"><strong>Characteristic</strong></th>
<th id="<strong>N = 2,370</strong><span class=&quot;gt_footnote_marks&quot; style=&quot;white-space:nowrap;font-style:italic;font-weight:normal;&quot;><sup>1</sup></span>" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col"><strong>N = 2,370</strong><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span></th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="label">Duration of PT within first 72 hours, minutes</td>
<td class="gt_row gt_center" headers="stat_0">34 [25-70] - 1,485 patients</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">Duration of PT within ICU, minutes</td>
<td class="gt_row gt_center" headers="stat_0">55 [25-132] - 1,876 patients</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">Duration of PT within the hospital, minutes</td>
<td class="gt_row gt_center" headers="stat_0">119 [48-299] - 2,367 patients</td>
</tr>
</tbody><tfoot class="gt_footnotes">
<tr class="even">
<td colspan="2" class="gt_footnote"><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span> Median [25%-75%] - N patients</td>
</tr>
</tfoot>

</table>

</div>
</div>
</div>
</div>
</section>
</section>
<section id="imv-within-24-and-72-hours-of-picu-hospitalization" class="level2">
<h2 class="anchored" data-anchor-id="imv-within-24-and-72-hours-of-picu-hospitalization">IMV within 24 (and 72) hours of PICU hospitalization</h2>
<p>Since PT is likely less commonly provided to patients during IMV, we should know which patients had IMV early in the PICU hospitalization. We can use the “df_temp” data frame that we created above since this already has 24 and 72 hour computations.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: early imv and PT comparison</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Get patients who had early (or not early) ventilation in the ICU</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>df_vent_temp <span class="ot">&lt;-</span> df_vent_episodes <span class="sc">%&gt;%</span> </span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>     <span class="fu">select</span>(mrn, enc_id, vent_episode, vent_time_start, vent_time_stop)</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>ventjoinby24 <span class="ot">&lt;-</span> <span class="fu">join_by</span>(mrn, enc_id, <span class="fu">overlaps</span>(x<span class="sc">$</span>icu_start_date, x<span class="sc">$</span>t24,</span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>                                            y<span class="sc">$</span>vent_time_start, y<span class="sc">$</span>vent_time_stop))</span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>ventjoinby72 <span class="ot">&lt;-</span> <span class="fu">join_by</span>(mrn, enc_id, <span class="fu">overlaps</span>(x<span class="sc">$</span>icu_start_date, x<span class="sc">$</span>t72,</span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>                                            y<span class="sc">$</span>vent_time_start, y<span class="sc">$</span>vent_time_stop))</span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a>df_vent_temp24 <span class="ot">&lt;-</span> <span class="fu">inner_join</span>(df_temp, df_vent_temp, <span class="at">by =</span> ventjoinby24) <span class="sc">%&gt;%</span> </span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a>     <span class="fu">mutate</span>(<span class="at">vent24 =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a>     <span class="fu">select</span>(mrn, enc_id, icu_start_date, icu_stop_date, vent24, vent_time_start, vent_time_stop) <span class="sc">%&gt;%</span> </span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a>     <span class="fu">distinct</span>()</span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a>df_vent_temp72 <span class="ot">&lt;-</span> <span class="fu">inner_join</span>(df_temp, df_vent_temp, <span class="at">by =</span> ventjoinby72) <span class="sc">%&gt;%</span> </span>
<span id="cb21-19"><a href="#cb21-19" aria-hidden="true" tabindex="-1"></a>     <span class="fu">mutate</span>(<span class="at">vent72 =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb21-20"><a href="#cb21-20" aria-hidden="true" tabindex="-1"></a>     <span class="fu">select</span>(mrn, enc_id, icu_start_date, icu_stop_date, vent72, vent_time_start, vent_time_stop)<span class="sc">%&gt;%</span> </span>
<span id="cb21-21"><a href="#cb21-21" aria-hidden="true" tabindex="-1"></a>     <span class="fu">distinct</span>()</span>
<span id="cb21-22"><a href="#cb21-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-23"><a href="#cb21-23" aria-hidden="true" tabindex="-1"></a>df_early_vent <span class="ot">&lt;-</span> <span class="fu">full_join</span>(df_vent_temp24, df_vent_temp72) <span class="sc">%&gt;%</span> </span>
<span id="cb21-24"><a href="#cb21-24" aria-hidden="true" tabindex="-1"></a>     <span class="fu">relocate</span>(vent24, vent72, <span class="at">.after =</span> enc_id) </span>
<span id="cb21-25"><a href="#cb21-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-26"><a href="#cb21-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Now add this into the PT record</span></span>
<span id="cb21-27"><a href="#cb21-27" aria-hidden="true" tabindex="-1"></a>df_pt_counts <span class="ot">&lt;-</span> <span class="fu">left_join</span>(df_pt_counts, df_early_vent)<span class="sc">%&gt;%</span> </span>
<span id="cb21-28"><a href="#cb21-28" aria-hidden="true" tabindex="-1"></a>     <span class="fu">mutate</span>(<span class="at">vent24 =</span> <span class="fu">replace_na</span>(vent24, <span class="cn">FALSE</span>),</span>
<span id="cb21-29"><a href="#cb21-29" aria-hidden="true" tabindex="-1"></a>            <span class="at">vent72 =</span> <span class="fu">replace_na</span>(vent72, <span class="cn">FALSE</span>)) </span>
<span id="cb21-30"><a href="#cb21-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-31"><a href="#cb21-31" aria-hidden="true" tabindex="-1"></a><span class="co"># Now display tables of each.</span></span>
<span id="cb21-32"><a href="#cb21-32" aria-hidden="true" tabindex="-1"></a>df_pt_counts <span class="sc">%&gt;%</span> </span>
<span id="cb21-33"><a href="#cb21-33" aria-hidden="true" tabindex="-1"></a>     <span class="fu">tbl_summary</span>(<span class="at">include =</span> <span class="fu">c</span>(<span class="st">'vent24'</span>, <span class="fu">starts_with</span>(<span class="st">'n_'</span>)),</span>
<span id="cb21-34"><a href="#cb21-34" aria-hidden="true" tabindex="-1"></a>                 <span class="at">by =</span> <span class="st">'vent24'</span>,</span>
<span id="cb21-35"><a href="#cb21-35" aria-hidden="true" tabindex="-1"></a>                 <span class="at">label =</span> <span class="fu">list</span>(n_early_pt <span class="sc">~</span> <span class="st">'Early PT (within 72 hours)'</span>,</span>
<span id="cb21-36"><a href="#cb21-36" aria-hidden="true" tabindex="-1"></a>                              n_icu_pt <span class="sc">~</span> <span class="st">'PT any time in the ICU'</span>,</span>
<span id="cb21-37"><a href="#cb21-37" aria-hidden="true" tabindex="-1"></a>                              n_any_pt <span class="sc">~</span> <span class="st">'PT any time in the hospital'</span>,</span>
<span id="cb21-38"><a href="#cb21-38" aria-hidden="true" tabindex="-1"></a>                              n_pt0_24 <span class="sc">~</span> <span class="st">'PT within 0-24 hours'</span>,</span>
<span id="cb21-39"><a href="#cb21-39" aria-hidden="true" tabindex="-1"></a>                              n_pt24_48 <span class="sc">~</span> <span class="st">'PT within 24-48 hours'</span>,</span>
<span id="cb21-40"><a href="#cb21-40" aria-hidden="true" tabindex="-1"></a>                              n_pt48_72 <span class="sc">~</span> <span class="st">'PT within 48-72 hours'</span>,</span>
<span id="cb21-41"><a href="#cb21-41" aria-hidden="true" tabindex="-1"></a>                              n_pt_each <span class="sc">~</span> <span class="st">'Early PT on any 2 days'</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb21-42"><a href="#cb21-42" aria-hidden="true" tabindex="-1"></a>     <span class="fu">modify_spanning_header</span>(<span class="fu">all_stat_cols</span>() <span class="sc">~</span> <span class="st">'**IMV within first 24 hours of PICU**'</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb21-43"><a href="#cb21-43" aria-hidden="true" tabindex="-1"></a>     <span class="fu">add_p</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<div id="adlgfpzhrw" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#adlgfpzhrw table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#adlgfpzhrw thead, #adlgfpzhrw tbody, #adlgfpzhrw tfoot, #adlgfpzhrw tr, #adlgfpzhrw td, #adlgfpzhrw th {
  border-style: none;
}

#adlgfpzhrw p {
  margin: 0;
  padding: 0;
}

#adlgfpzhrw .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#adlgfpzhrw .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#adlgfpzhrw .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#adlgfpzhrw .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#adlgfpzhrw .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#adlgfpzhrw .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#adlgfpzhrw .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#adlgfpzhrw .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#adlgfpzhrw .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#adlgfpzhrw .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#adlgfpzhrw .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#adlgfpzhrw .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#adlgfpzhrw .gt_spanner_row {
  border-bottom-style: hidden;
}

#adlgfpzhrw .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#adlgfpzhrw .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#adlgfpzhrw .gt_from_md > :first-child {
  margin-top: 0;
}

#adlgfpzhrw .gt_from_md > :last-child {
  margin-bottom: 0;
}

#adlgfpzhrw .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#adlgfpzhrw .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#adlgfpzhrw .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#adlgfpzhrw .gt_row_group_first td {
  border-top-width: 2px;
}

#adlgfpzhrw .gt_row_group_first th {
  border-top-width: 2px;
}

#adlgfpzhrw .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#adlgfpzhrw .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#adlgfpzhrw .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#adlgfpzhrw .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#adlgfpzhrw .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#adlgfpzhrw .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#adlgfpzhrw .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#adlgfpzhrw .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#adlgfpzhrw .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#adlgfpzhrw .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#adlgfpzhrw .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#adlgfpzhrw .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#adlgfpzhrw .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#adlgfpzhrw .gt_left {
  text-align: left;
}

#adlgfpzhrw .gt_center {
  text-align: center;
}

#adlgfpzhrw .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#adlgfpzhrw .gt_font_normal {
  font-weight: normal;
}

#adlgfpzhrw .gt_font_bold {
  font-weight: bold;
}

#adlgfpzhrw .gt_font_italic {
  font-style: italic;
}

#adlgfpzhrw .gt_super {
  font-size: 65%;
}

#adlgfpzhrw .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#adlgfpzhrw .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#adlgfpzhrw .gt_indent_1 {
  text-indent: 5px;
}

#adlgfpzhrw .gt_indent_2 {
  text-indent: 10px;
}

#adlgfpzhrw .gt_indent_3 {
  text-indent: 15px;
}

#adlgfpzhrw .gt_indent_4 {
  text-indent: 20px;
}

#adlgfpzhrw .gt_indent_5 {
  text-indent: 25px;
}
</style>

<table class="gt_table table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="header gt_col_headings gt_spanner_row">
<th rowspan="2" id="<strong>Characteristic</strong>" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col"><strong>Characteristic</strong></th>
<th colspan="2" id="<strong>IMV within first 24 hours of PICU</strong>" class="gt_center gt_columns_top_border gt_column_spanner_outer" data-quarto-table-cell-role="th" scope="colgroup"><span class="gt_column_spanner"><strong>IMV within first 24 hours of PICU</strong></span></th>
<th rowspan="2" id="<strong>p-value</strong><span class=&quot;gt_footnote_marks&quot; style=&quot;white-space:nowrap;font-style:italic;font-weight:normal;&quot;><sup>2</sup></span>" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col"><strong>p-value</strong><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>2</sup></span></th>
</tr>
<tr class="odd gt_col_headings">
<th id="<strong>FALSE</strong>, N = 2,419<span class=&quot;gt_footnote_marks&quot; style=&quot;white-space:nowrap;font-style:italic;font-weight:normal;&quot;><sup>1</sup></span>" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col"><strong>FALSE</strong>, N = 2,419<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span></th>
<th id="<strong>TRUE</strong>, N = 612<span class=&quot;gt_footnote_marks&quot; style=&quot;white-space:nowrap;font-style:italic;font-weight:normal;&quot;><sup>1</sup></span>" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col"><strong>TRUE</strong>, N = 612<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span></th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="label">Early PT (within 72 hours)</td>
<td class="gt_row gt_center" headers="stat_1">1,274 (53%)</td>
<td class="gt_row gt_center" headers="stat_2">214 (35%)</td>
<td class="gt_row gt_center" headers="p.value">&lt;0.001</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">PT any time in the ICU</td>
<td class="gt_row gt_center" headers="stat_1">1,385 (57%)</td>
<td class="gt_row gt_center" headers="stat_2">497 (81%)</td>
<td class="gt_row gt_center" headers="p.value">&lt;0.001</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">PT any time in the hospital</td>
<td class="gt_row gt_center" headers="stat_1">1,833 (76%)</td>
<td class="gt_row gt_center" headers="stat_2">542 (89%)</td>
<td class="gt_row gt_center" headers="p.value">&lt;0.001</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">PT within 0-24 hours</td>
<td class="gt_row gt_center" headers="stat_1">533 (22%)</td>
<td class="gt_row gt_center" headers="stat_2">58 (9.5%)</td>
<td class="gt_row gt_center" headers="p.value">&lt;0.001</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">PT within 24-48 hours</td>
<td class="gt_row gt_center" headers="stat_1">758 (31%)</td>
<td class="gt_row gt_center" headers="stat_2">97 (16%)</td>
<td class="gt_row gt_center" headers="p.value">&lt;0.001</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">PT within 48-72 hours</td>
<td class="gt_row gt_center" headers="stat_1">776 (32%)</td>
<td class="gt_row gt_center" headers="stat_2">117 (19%)</td>
<td class="gt_row gt_center" headers="p.value">&lt;0.001</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">Early PT on any 2 days</td>
<td class="gt_row gt_center" headers="stat_1">4 (0.2%)</td>
<td class="gt_row gt_center" headers="stat_2">0 (0%)</td>
<td class="gt_row gt_center" headers="p.value">0.6</td>
</tr>
</tbody><tfoot class="gt_footnotes">
<tr class="odd">
<td colspan="4" class="gt_footnote"><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span> n (%)</td>
</tr>
<tr class="even">
<td colspan="4" class="gt_footnote"><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>2</sup></span> Pearson’s Chi-squared test; Fisher’s exact test</td>
</tr>
</tfoot>

</table>

</div>
</div>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Now display tables of each.</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>df_pt_counts <span class="sc">%&gt;%</span> </span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>     <span class="fu">tbl_summary</span>(<span class="at">include =</span> <span class="fu">c</span>(<span class="st">'vent72'</span>, <span class="fu">starts_with</span>(<span class="st">'n_'</span>)),</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>                 <span class="at">by =</span> <span class="st">'vent72'</span>,</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>                 <span class="at">label =</span> <span class="fu">list</span>(n_early_pt <span class="sc">~</span> <span class="st">'Early PT (within 72 hours)'</span>,</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>                              n_icu_pt <span class="sc">~</span> <span class="st">'PT any time in the ICU'</span>,</span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>                              n_any_pt <span class="sc">~</span> <span class="st">'PT any time in the hospital'</span>,</span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>                              n_pt0_24 <span class="sc">~</span> <span class="st">'PT within 0-24 hours'</span>,</span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>                              n_pt24_48 <span class="sc">~</span> <span class="st">'PT within 24-48 hours'</span>,</span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>                              n_pt48_72 <span class="sc">~</span> <span class="st">'PT within 48-72 hours'</span>,</span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>                              n_pt_each <span class="sc">~</span> <span class="st">'Early PT on any 2 days'</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a>     <span class="fu">modify_spanning_header</span>(<span class="fu">all_stat_cols</span>() <span class="sc">~</span> <span class="st">'**IMV within first 72 hours of PICU**'</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a>     <span class="fu">add_p</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<div id="pacpelnyfu" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#pacpelnyfu table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#pacpelnyfu thead, #pacpelnyfu tbody, #pacpelnyfu tfoot, #pacpelnyfu tr, #pacpelnyfu td, #pacpelnyfu th {
  border-style: none;
}

#pacpelnyfu p {
  margin: 0;
  padding: 0;
}

#pacpelnyfu .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#pacpelnyfu .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#pacpelnyfu .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#pacpelnyfu .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#pacpelnyfu .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#pacpelnyfu .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#pacpelnyfu .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#pacpelnyfu .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#pacpelnyfu .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#pacpelnyfu .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#pacpelnyfu .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#pacpelnyfu .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#pacpelnyfu .gt_spanner_row {
  border-bottom-style: hidden;
}

#pacpelnyfu .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#pacpelnyfu .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#pacpelnyfu .gt_from_md > :first-child {
  margin-top: 0;
}

#pacpelnyfu .gt_from_md > :last-child {
  margin-bottom: 0;
}

#pacpelnyfu .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#pacpelnyfu .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#pacpelnyfu .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#pacpelnyfu .gt_row_group_first td {
  border-top-width: 2px;
}

#pacpelnyfu .gt_row_group_first th {
  border-top-width: 2px;
}

#pacpelnyfu .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#pacpelnyfu .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#pacpelnyfu .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#pacpelnyfu .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#pacpelnyfu .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#pacpelnyfu .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#pacpelnyfu .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#pacpelnyfu .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#pacpelnyfu .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#pacpelnyfu .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#pacpelnyfu .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#pacpelnyfu .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#pacpelnyfu .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#pacpelnyfu .gt_left {
  text-align: left;
}

#pacpelnyfu .gt_center {
  text-align: center;
}

#pacpelnyfu .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#pacpelnyfu .gt_font_normal {
  font-weight: normal;
}

#pacpelnyfu .gt_font_bold {
  font-weight: bold;
}

#pacpelnyfu .gt_font_italic {
  font-style: italic;
}

#pacpelnyfu .gt_super {
  font-size: 65%;
}

#pacpelnyfu .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#pacpelnyfu .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#pacpelnyfu .gt_indent_1 {
  text-indent: 5px;
}

#pacpelnyfu .gt_indent_2 {
  text-indent: 10px;
}

#pacpelnyfu .gt_indent_3 {
  text-indent: 15px;
}

#pacpelnyfu .gt_indent_4 {
  text-indent: 20px;
}

#pacpelnyfu .gt_indent_5 {
  text-indent: 25px;
}
</style>

<table class="gt_table table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="header gt_col_headings gt_spanner_row">
<th rowspan="2" id="<strong>Characteristic</strong>" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col"><strong>Characteristic</strong></th>
<th colspan="2" id="<strong>IMV within first 72 hours of PICU</strong>" class="gt_center gt_columns_top_border gt_column_spanner_outer" data-quarto-table-cell-role="th" scope="colgroup"><span class="gt_column_spanner"><strong>IMV within first 72 hours of PICU</strong></span></th>
<th rowspan="2" id="<strong>p-value</strong><span class=&quot;gt_footnote_marks&quot; style=&quot;white-space:nowrap;font-style:italic;font-weight:normal;&quot;><sup>2</sup></span>" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col"><strong>p-value</strong><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>2</sup></span></th>
</tr>
<tr class="odd gt_col_headings">
<th id="<strong>FALSE</strong>, N = 2,373<span class=&quot;gt_footnote_marks&quot; style=&quot;white-space:nowrap;font-style:italic;font-weight:normal;&quot;><sup>1</sup></span>" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col"><strong>FALSE</strong>, N = 2,373<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span></th>
<th id="<strong>TRUE</strong>, N = 658<span class=&quot;gt_footnote_marks&quot; style=&quot;white-space:nowrap;font-style:italic;font-weight:normal;&quot;><sup>1</sup></span>" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col"><strong>TRUE</strong>, N = 658<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span></th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="label">Early PT (within 72 hours)</td>
<td class="gt_row gt_center" headers="stat_1">1,265 (53%)</td>
<td class="gt_row gt_center" headers="stat_2">223 (34%)</td>
<td class="gt_row gt_center" headers="p.value">&lt;0.001</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">PT any time in the ICU</td>
<td class="gt_row gt_center" headers="stat_1">1,346 (57%)</td>
<td class="gt_row gt_center" headers="stat_2">536 (81%)</td>
<td class="gt_row gt_center" headers="p.value">&lt;0.001</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">PT any time in the hospital</td>
<td class="gt_row gt_center" headers="stat_1">1,788 (75%)</td>
<td class="gt_row gt_center" headers="stat_2">587 (89%)</td>
<td class="gt_row gt_center" headers="p.value">&lt;0.001</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">PT within 0-24 hours</td>
<td class="gt_row gt_center" headers="stat_1">530 (22%)</td>
<td class="gt_row gt_center" headers="stat_2">61 (9.3%)</td>
<td class="gt_row gt_center" headers="p.value">&lt;0.001</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">PT within 24-48 hours</td>
<td class="gt_row gt_center" headers="stat_1">753 (32%)</td>
<td class="gt_row gt_center" headers="stat_2">102 (16%)</td>
<td class="gt_row gt_center" headers="p.value">&lt;0.001</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">PT within 48-72 hours</td>
<td class="gt_row gt_center" headers="stat_1">772 (33%)</td>
<td class="gt_row gt_center" headers="stat_2">121 (18%)</td>
<td class="gt_row gt_center" headers="p.value">&lt;0.001</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">Early PT on any 2 days</td>
<td class="gt_row gt_center" headers="stat_1">4 (0.2%)</td>
<td class="gt_row gt_center" headers="stat_2">0 (0%)</td>
<td class="gt_row gt_center" headers="p.value">0.6</td>
</tr>
</tbody><tfoot class="gt_footnotes">
<tr class="odd">
<td colspan="4" class="gt_footnote"><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span> n (%)</td>
</tr>
<tr class="even">
<td colspan="4" class="gt_footnote"><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>2</sup></span> Pearson’s Chi-squared test; Fisher’s exact test</td>
</tr>
</tfoot>

</table>

</div>
</div>
</div>
</div>
</section>
</section>
<section id="table-1" class="level1">
<h1>Table 1</h1>
<p>We will now begin generating some basic tables</p>
<p>Not used</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># tabyl(df_early_pt_firstpicu, early_pt)</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="co"># # Now try to sum all the active types of PT</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="co"># df_pt_active &lt;- df_pt_wide %&gt;%</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a><span class="co">#      mutate(across(where(is.numeric), ~ replace_na(.x, 0))) %&gt;%</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a><span class="co">#      mutate(pt_active_time = gait_training_time_entry + therapeutic_exercise_time_entry + wheelchair_management_time_entry +</span></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a><span class="co">#                  neuromuscular_re_education_time_entry + therapeutic_exercise_comments + gait_training_comments +</span></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a><span class="co">#                  orthotic_prosthetic_management_and_or_training_time_entry + prosthetic_training_time_entry) %&gt;%</span></span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a><span class="co">#      ungroup() %&gt;%</span></span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a><span class="co">#      select(mrn, enc_id, recorded_time, pt_active_time) %&gt;%</span></span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a><span class="co">#      filter(pt_active_time &gt; 0)</span></span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a><span class="co"># # Do the same kind of inequality join as before, ensuring the PT is after PICU start</span></span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a><span class="co"># df_pt_active_picu &lt;- left_join(df_temp, df_pt_active, by = pt_join_by, relationship = "many-to-many")</span></span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a><span class="co"># # Determine whether patients had PT in each of the intervals</span></span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a><span class="co"># df_early_pt_active &lt;- df_pt_active_picu %&gt;%</span></span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a><span class="co">#      mutate(early_pt_active = if_else(recorded_time %within% int0_72, TRUE, FALSE)) %&gt;%</span></span>
<span id="cb23-19"><a href="#cb23-19" aria-hidden="true" tabindex="-1"></a><span class="co">#      group_by(mrn, enc_id, icu_start_date) %&gt;%</span></span>
<span id="cb23-20"><a href="#cb23-20" aria-hidden="true" tabindex="-1"></a><span class="co">#      filter(early_pt_active == max(early_pt_active)) %&gt;%</span></span>
<span id="cb23-21"><a href="#cb23-21" aria-hidden="true" tabindex="-1"></a><span class="co">#      ungroup() %&gt;%</span></span>
<span id="cb23-22"><a href="#cb23-22" aria-hidden="true" tabindex="-1"></a><span class="co">#      distinct(mrn, enc_id, icu_start_date, early_pt_active)</span></span>
<span id="cb23-23"><a href="#cb23-23" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb23-24"><a href="#cb23-24" aria-hidden="true" tabindex="-1"></a><span class="co"># tabyl(df_early_pt_active, early_pt_active)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<!-- -->

</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb24" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "Early mobilization"</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="co"># bibliography: </span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="co"># csl: </span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a><span class="an">prefer-html:</span><span class="co"> true</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a><span class="an">author:</span><span class="co"> </span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a><span class="co">     - name: Andrew Geneslaw</span></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a><span class="co">       degrees:</span></span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a><span class="co">          - MD</span></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a><span class="co">          - MS</span></span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a><span class="co">       orcid: 0000-0003-1859-2369</span></span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a><span class="co">       email: asg2195@cumc.columbia.edu</span></span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a><span class="co">       affiliations:</span></span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a><span class="co">        - name: Columbia University Irving Medical Center</span></span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a><span class="co">          department: Department of Pediatrics</span></span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a><span class="co">          city: New York</span></span>
<span id="cb24-17"><a href="#cb24-17" aria-hidden="true" tabindex="-1"></a><span class="co">          state: NY</span></span>
<span id="cb24-18"><a href="#cb24-18" aria-hidden="true" tabindex="-1"></a><span class="co">          country: USA</span></span>
<span id="cb24-19"><a href="#cb24-19" aria-hidden="true" tabindex="-1"></a><span class="co">          postal-code: 10032</span></span>
<span id="cb24-20"><a href="#cb24-20" aria-hidden="true" tabindex="-1"></a><span class="an">format:</span><span class="co"> </span></span>
<span id="cb24-21"><a href="#cb24-21" aria-hidden="true" tabindex="-1"></a><span class="co">     html:</span></span>
<span id="cb24-22"><a href="#cb24-22" aria-hidden="true" tabindex="-1"></a><span class="co">          code-fold: true</span></span>
<span id="cb24-23"><a href="#cb24-23" aria-hidden="true" tabindex="-1"></a><span class="co">          toc: true</span></span>
<span id="cb24-24"><a href="#cb24-24" aria-hidden="true" tabindex="-1"></a><span class="co">          crossrefs-hover: true</span></span>
<span id="cb24-25"><a href="#cb24-25" aria-hidden="true" tabindex="-1"></a><span class="co">          citations-hover: true</span></span>
<span id="cb24-26"><a href="#cb24-26" aria-hidden="true" tabindex="-1"></a><span class="co">          code-tools:</span></span>
<span id="cb24-27"><a href="#cb24-27" aria-hidden="true" tabindex="-1"></a><span class="co">               source: true</span></span>
<span id="cb24-28"><a href="#cb24-28" aria-hidden="true" tabindex="-1"></a><span class="co">               toggle: false</span></span>
<span id="cb24-29"><a href="#cb24-29" aria-hidden="true" tabindex="-1"></a><span class="co">               caption: none</span></span>
<span id="cb24-30"><a href="#cb24-30" aria-hidden="true" tabindex="-1"></a><span class="co">     gfm:</span></span>
<span id="cb24-31"><a href="#cb24-31" aria-hidden="true" tabindex="-1"></a><span class="co">          codeBlock: true</span></span>
<span id="cb24-32"><a href="#cb24-32" aria-hidden="true" tabindex="-1"></a><span class="co">          toc: true</span></span>
<span id="cb24-33"><a href="#cb24-33" aria-hidden="true" tabindex="-1"></a><span class="co">          crossref-hover: true</span></span>
<span id="cb24-34"><a href="#cb24-34" aria-hidden="true" tabindex="-1"></a><span class="co">          citation: true</span></span>
<span id="cb24-35"><a href="#cb24-35" aria-hidden="true" tabindex="-1"></a><span class="co">          codeTools:</span></span>
<span id="cb24-36"><a href="#cb24-36" aria-hidden="true" tabindex="-1"></a><span class="co">               source: true</span></span>
<span id="cb24-37"><a href="#cb24-37" aria-hidden="true" tabindex="-1"></a><span class="co">               toggle: false</span></span>
<span id="cb24-38"><a href="#cb24-38" aria-hidden="true" tabindex="-1"></a><span class="co">               caption: none </span></span>
<span id="cb24-39"><a href="#cb24-39" aria-hidden="true" tabindex="-1"></a><span class="co">     pdf:</span></span>
<span id="cb24-40"><a href="#cb24-40" aria-hidden="true" tabindex="-1"></a><span class="co">          toc: true</span></span>
<span id="cb24-41"><a href="#cb24-41" aria-hidden="true" tabindex="-1"></a><span class="co">          pdf-engine: pdflatex</span></span>
<span id="cb24-42"><a href="#cb24-42" aria-hidden="true" tabindex="-1"></a><span class="co">          </span></span>
<span id="cb24-43"><a href="#cb24-43" aria-hidden="true" tabindex="-1"></a><span class="an">execute:</span></span>
<span id="cb24-44"><a href="#cb24-44" aria-hidden="true" tabindex="-1"></a><span class="co">     echo: true</span></span>
<span id="cb24-45"><a href="#cb24-45" aria-hidden="true" tabindex="-1"></a><span class="co">     warning: false</span></span>
<span id="cb24-46"><a href="#cb24-46" aria-hidden="true" tabindex="-1"></a><span class="co">     cache: true</span></span>
<span id="cb24-47"><a href="#cb24-47" aria-hidden="true" tabindex="-1"></a><span class="co">     </span></span>
<span id="cb24-48"><a href="#cb24-48" aria-hidden="true" tabindex="-1"></a><span class="an">editor_options:</span><span class="co"> </span></span>
<span id="cb24-49"><a href="#cb24-49" aria-hidden="true" tabindex="-1"></a><span class="co">  chunk_output_type: inline</span></span>
<span id="cb24-50"><a href="#cb24-50" aria-hidden="true" tabindex="-1"></a><span class="co">  </span></span>
<span id="cb24-51"><a href="#cb24-51" aria-hidden="true" tabindex="-1"></a><span class="an">engine:</span><span class="co"> knitr</span></span>
<span id="cb24-52"><a href="#cb24-52" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb24-53"><a href="#cb24-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-54"><a href="#cb24-54" aria-hidden="true" tabindex="-1"></a><span class="fu"># Early mobilization retrospective analysis</span></span>
<span id="cb24-55"><a href="#cb24-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-56"><a href="#cb24-56" aria-hidden="true" tabindex="-1"></a>This project will assess the delivery of physical therapy to critically ill children at the Morgan Stanley Children's Hospital in New York City. We are interested in whether physical therapy is being delivered within 72 hours of admission to the PICU. Physical therapy within 72 hours will be referred to from here out as "Early mobilization" or EM.</span>
<span id="cb24-57"><a href="#cb24-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-58"><a href="#cb24-58" aria-hidden="true" tabindex="-1"></a><span class="fu"># Initial setup</span></span>
<span id="cb24-59"><a href="#cb24-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-60"><a href="#cb24-60" aria-hidden="true" tabindex="-1"></a><span class="fu">## Loading libraries and data paths</span></span>
<span id="cb24-61"><a href="#cb24-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-64"><a href="#cb24-64" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb24-65"><a href="#cb24-65" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: setup</span></span>
<span id="cb24-66"><a href="#cb24-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-67"><a href="#cb24-67" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(chonyepicdata)</span>
<span id="cb24-68"><a href="#cb24-68" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb24-69"><a href="#cb24-69" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb24-70"><a href="#cb24-70" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(janitor)</span>
<span id="cb24-71"><a href="#cb24-71" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb24-72"><a href="#cb24-72" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gtsummary)</span>
<span id="cb24-73"><a href="#cb24-73" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(kableExtra)</span>
<span id="cb24-74"><a href="#cb24-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-75"><a href="#cb24-75" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">scipen =</span> <span class="dv">3</span>)</span>
<span id="cb24-76"><a href="#cb24-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-77"><a href="#cb24-77" aria-hidden="true" tabindex="-1"></a><span class="co"># Load configuration files. You may need to edit the file (located in a config folder) with your own filepath.</span></span>
<span id="cb24-78"><a href="#cb24-78" aria-hidden="true" tabindex="-1"></a><span class="co"># Alternately you can just send in the correct filename.</span></span>
<span id="cb24-79"><a href="#cb24-79" aria-hidden="true" tabindex="-1"></a><span class="fu">load_config</span>(<span class="at">yml_path =</span> <span class="st">'config/config.yml'</span>, <span class="at">useglobal =</span> <span class="cn">TRUE</span>)</span>
<span id="cb24-80"><a href="#cb24-80" aria-hidden="true" tabindex="-1"></a>data_path <span class="ot">&lt;-</span> data_path_chony</span>
<span id="cb24-81"><a href="#cb24-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-82"><a href="#cb24-82" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb24-83"><a href="#cb24-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-84"><a href="#cb24-84" aria-hidden="true" tabindex="-1"></a><span class="fu">## Loading patients, encounters and PICU start/stop times</span></span>
<span id="cb24-85"><a href="#cb24-85" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-86"><a href="#cb24-86" aria-hidden="true" tabindex="-1"></a>A patient has a medical record number (MRN) which is persistent across time.</span>
<span id="cb24-87"><a href="#cb24-87" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-88"><a href="#cb24-88" aria-hidden="true" tabindex="-1"></a>A unique patient MRN can have multiple encounters. An encounter is defined by the variable \code{PAT_ENC_CSN_ID}, which has been renamed \code{PAT_ENC} for easier typing throughout this project. A patient encounter is a distinct encounter with the CHONY hospital system. An encounter can be inpatient, outpatient, ED, virtual, or not even involve patient contact (such as an attempt to call a patient that fails). For the purposes of this project, all encounters are an inpatient hospitalization. All encounters will have a start and stop date.</span>
<span id="cb24-89"><a href="#cb24-89" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-90"><a href="#cb24-90" aria-hidden="true" tabindex="-1"></a>During a given hospital encounter ("admission"), a patient may move between multiple inpatient locations. These involve floor locations, PICUs, and operative areas. It also includes "virtual" areas, such as changing locations to a radiology area during a portable x-ray. The patient does not physically move in these circumstances and so we will mostly ignore them.</span>
<span id="cb24-91"><a href="#cb24-91" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-92"><a href="#cb24-92" aria-hidden="true" tabindex="-1"></a>Because a patient can move multiple times between floor and PICU locations, a given hospital encounter might have multiple PICU admissions. We will break hospital encounters into individual PICU encounters, and each get a unique ID.</span>
<span id="cb24-93"><a href="#cb24-93" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-96"><a href="#cb24-96" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb24-97"><a href="#cb24-97" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: load-data</span></span>
<span id="cb24-98"><a href="#cb24-98" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-99"><a href="#cb24-99" aria-hidden="true" tabindex="-1"></a><span class="co"># load all encounters</span></span>
<span id="cb24-100"><a href="#cb24-100" aria-hidden="true" tabindex="-1"></a>df_encounters <span class="ot">&lt;-</span> <span class="fu">load_encounters</span>(<span class="fu">paste0</span>(data_path, fname_encounter))</span>
<span id="cb24-101"><a href="#cb24-101" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-102"><a href="#cb24-102" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove any encounters that were for less than 24 hours</span></span>
<span id="cb24-103"><a href="#cb24-103" aria-hidden="true" tabindex="-1"></a>df_encounters <span class="ot">&lt;-</span> df_encounters <span class="sc">%&gt;%</span> </span>
<span id="cb24-104"><a href="#cb24-104" aria-hidden="true" tabindex="-1"></a>     <span class="fu">filter</span>((hospital_discharge_date <span class="sc">-</span> hospital_admission_date)<span class="sc">/</span><span class="fu">ddays</span>(<span class="dv">1</span>) <span class="sc">&gt;=</span> <span class="dv">1</span>)</span>
<span id="cb24-105"><a href="#cb24-105" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-106"><a href="#cb24-106" aria-hidden="true" tabindex="-1"></a>enc_valid <span class="ot">&lt;-</span> df_encounters <span class="sc">%&gt;%</span> <span class="fu">distinct</span>(enc_id) <span class="sc">%&gt;%</span> <span class="fu">pull</span>()</span>
<span id="cb24-107"><a href="#cb24-107" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-108"><a href="#cb24-108" aria-hidden="true" tabindex="-1"></a><span class="co"># Now get a set of all PICU start/stop datetimes for these encounters</span></span>
<span id="cb24-109"><a href="#cb24-109" aria-hidden="true" tabindex="-1"></a>df_picu_startstop <span class="ot">&lt;-</span> <span class="fu">get_picu_intervals</span>(<span class="fu">paste0</span>(data_path, fname_adt)) <span class="sc">%&gt;%</span></span>
<span id="cb24-110"><a href="#cb24-110" aria-hidden="true" tabindex="-1"></a>     <span class="fu">arrange</span>(mrn, enc_id, icu_start_date)</span>
<span id="cb24-111"><a href="#cb24-111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-112"><a href="#cb24-112" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove encounters that were less than 24 hours</span></span>
<span id="cb24-113"><a href="#cb24-113" aria-hidden="true" tabindex="-1"></a>df_picu_startstop <span class="ot">&lt;-</span> df_picu_startstop <span class="sc">%&gt;%</span> </span>
<span id="cb24-114"><a href="#cb24-114" aria-hidden="true" tabindex="-1"></a>     <span class="fu">filter</span>(enc_id <span class="sc">%in%</span> enc_valid)</span>
<span id="cb24-115"><a href="#cb24-115" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-116"><a href="#cb24-116" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove PICU episodes that were less than 24 hours</span></span>
<span id="cb24-117"><a href="#cb24-117" aria-hidden="true" tabindex="-1"></a>df_picu_startstop <span class="ot">&lt;-</span> df_picu_startstop <span class="sc">%&gt;%</span> </span>
<span id="cb24-118"><a href="#cb24-118" aria-hidden="true" tabindex="-1"></a>     <span class="fu">filter</span>((icu_stop_date <span class="sc">-</span> icu_start_date)<span class="sc">/</span><span class="fu">ddays</span>(<span class="dv">1</span>) <span class="sc">&gt;=</span> <span class="dv">1</span>)</span>
<span id="cb24-119"><a href="#cb24-119" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-120"><a href="#cb24-120" aria-hidden="true" tabindex="-1"></a>n_mrn <span class="ot">&lt;-</span> <span class="fu">distinct</span>(df_encounters, mrn) <span class="sc">%&gt;%</span> <span class="fu">nrow</span>()</span>
<span id="cb24-121"><a href="#cb24-121" aria-hidden="true" tabindex="-1"></a>n_encounters <span class="ot">&lt;-</span> <span class="fu">distinct</span>(df_encounters, enc_id) <span class="sc">%&gt;%</span> <span class="fu">nrow</span>()</span>
<span id="cb24-122"><a href="#cb24-122" aria-hidden="true" tabindex="-1"></a>n_picu <span class="ot">&lt;-</span> <span class="fu">distinct</span>(df_picu_startstop, mrn, icu_start_date) <span class="sc">%&gt;%</span> <span class="fu">nrow</span>() </span>
<span id="cb24-123"><a href="#cb24-123" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-124"><a href="#cb24-124" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb24-125"><a href="#cb24-125" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-126"><a href="#cb24-126" aria-hidden="true" tabindex="-1"></a>|       | PICU       | Encounters       | Patients  |</span>
<span id="cb24-127"><a href="#cb24-127" aria-hidden="true" tabindex="-1"></a>|-------|------------|------------------|-----------|</span>
<span id="cb24-128"><a href="#cb24-128" aria-hidden="true" tabindex="-1"></a>| **n** | <span class="in">`r n_picu`</span> | <span class="in">`r n_encounters`</span> | <span class="in">`r n_mrn`</span> |</span>
<span id="cb24-129"><a href="#cb24-129" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-130"><a href="#cb24-130" aria-hidden="true" tabindex="-1"></a>Since we are interested primarily in mobilization within the first 72 hours of ICU hospitalization, we should determine how many patients stayed for this long.</span>
<span id="cb24-131"><a href="#cb24-131" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-134"><a href="#cb24-134" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb24-135"><a href="#cb24-135" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: 72 hour LOS</span></span>
<span id="cb24-136"><a href="#cb24-136" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-137"><a href="#cb24-137" aria-hidden="true" tabindex="-1"></a>df_picu_stats <span class="ot">&lt;-</span> df_picu_startstop <span class="sc">%&gt;%</span> </span>
<span id="cb24-138"><a href="#cb24-138" aria-hidden="true" tabindex="-1"></a>     <span class="fu">mutate</span>(<span class="at">los_picu =</span> (icu_stop_date <span class="sc">-</span> icu_start_date)<span class="sc">/</span><span class="fu">ddays</span>(<span class="dv">1</span>),</span>
<span id="cb24-139"><a href="#cb24-139" aria-hidden="true" tabindex="-1"></a>            <span class="at">los_picu_3days =</span> <span class="fu">if_else</span>(los_picu <span class="sc">&gt;=</span> <span class="dv">3</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>))</span>
<span id="cb24-140"><a href="#cb24-140" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-141"><a href="#cb24-141" aria-hidden="true" tabindex="-1"></a>df_encounter_stats <span class="ot">&lt;-</span> df_encounters <span class="sc">%&gt;%</span> </span>
<span id="cb24-142"><a href="#cb24-142" aria-hidden="true" tabindex="-1"></a>     <span class="fu">mutate</span>(<span class="at">los_hosp =</span> (hospital_discharge_date <span class="sc">-</span> hospital_admission_date)<span class="sc">/</span><span class="fu">ddays</span>(<span class="dv">1</span>),</span>
<span id="cb24-143"><a href="#cb24-143" aria-hidden="true" tabindex="-1"></a>            <span class="at">los_hosp_3days =</span> <span class="fu">if_else</span>(los_hosp <span class="sc">&gt;=</span><span class="dv">3</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>))</span>
<span id="cb24-144"><a href="#cb24-144" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-145"><a href="#cb24-145" aria-hidden="true" tabindex="-1"></a>df_picu_stats <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> los_picu)) <span class="sc">+</span> </span>
<span id="cb24-146"><a href="#cb24-146" aria-hidden="true" tabindex="-1"></a>     <span class="fu">geom_histogram</span>() <span class="sc">+</span> </span>
<span id="cb24-147"><a href="#cb24-147" aria-hidden="true" tabindex="-1"></a>     <span class="fu">scale_x_log10</span>(<span class="at">n.breaks =</span> <span class="dv">8</span>) <span class="sc">+</span> </span>
<span id="cb24-148"><a href="#cb24-148" aria-hidden="true" tabindex="-1"></a>     <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">'Days (log10 axis)'</span>,</span>
<span id="cb24-149"><a href="#cb24-149" aria-hidden="true" tabindex="-1"></a>          <span class="at">y =</span> <span class="st">'N'</span>,</span>
<span id="cb24-150"><a href="#cb24-150" aria-hidden="true" tabindex="-1"></a>          <span class="at">title =</span> <span class="st">'PICU LOS'</span>)</span>
<span id="cb24-151"><a href="#cb24-151" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-152"><a href="#cb24-152" aria-hidden="true" tabindex="-1"></a>df_encounter_stats <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> los_hosp)) <span class="sc">+</span> </span>
<span id="cb24-153"><a href="#cb24-153" aria-hidden="true" tabindex="-1"></a>     <span class="fu">geom_histogram</span>() <span class="sc">+</span> </span>
<span id="cb24-154"><a href="#cb24-154" aria-hidden="true" tabindex="-1"></a>     <span class="fu">scale_x_log10</span>(<span class="at">n.breaks =</span> <span class="dv">8</span>) <span class="sc">+</span> </span>
<span id="cb24-155"><a href="#cb24-155" aria-hidden="true" tabindex="-1"></a>     <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">'Days (log10 axis)'</span>,</span>
<span id="cb24-156"><a href="#cb24-156" aria-hidden="true" tabindex="-1"></a>          <span class="at">y =</span> <span class="st">'N'</span>,</span>
<span id="cb24-157"><a href="#cb24-157" aria-hidden="true" tabindex="-1"></a>          <span class="at">title =</span> <span class="st">'Hospital LOS'</span>)</span>
<span id="cb24-158"><a href="#cb24-158" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-159"><a href="#cb24-159" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(<span class="fu">tabyl</span>(df_picu_stats, los_picu_3days),</span>
<span id="cb24-160"><a href="#cb24-160" aria-hidden="true" tabindex="-1"></a>      <span class="at">format =</span> <span class="st">"markdown"</span>, </span>
<span id="cb24-161"><a href="#cb24-161" aria-hidden="true" tabindex="-1"></a>      <span class="at">align =</span> <span class="st">"c"</span>,</span>
<span id="cb24-162"><a href="#cb24-162" aria-hidden="true" tabindex="-1"></a>      <span class="at">caption =</span> <span class="st">"PICU admissions with PICU LOS at least 72 hours"</span>)</span>
<span id="cb24-163"><a href="#cb24-163" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-164"><a href="#cb24-164" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(<span class="fu">tabyl</span>(df_encounter_stats, los_hosp_3days), </span>
<span id="cb24-165"><a href="#cb24-165" aria-hidden="true" tabindex="-1"></a>      <span class="at">format =</span> <span class="st">"markdown"</span>, </span>
<span id="cb24-166"><a href="#cb24-166" aria-hidden="true" tabindex="-1"></a>      <span class="at">align =</span> <span class="st">"c"</span>,</span>
<span id="cb24-167"><a href="#cb24-167" aria-hidden="true" tabindex="-1"></a>      <span class="at">caption =</span> <span class="st">"Encounters with hospital LOS at least 72 hours"</span>)</span>
<span id="cb24-168"><a href="#cb24-168" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-169"><a href="#cb24-169" aria-hidden="true" tabindex="-1"></a><span class="co"># df_stats &lt;- left_join(df_picu_stats, df_encounter_stats)</span></span>
<span id="cb24-170"><a href="#cb24-170" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-171"><a href="#cb24-171" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb24-172"><a href="#cb24-172" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-173"><a href="#cb24-173" aria-hidden="true" tabindex="-1"></a><span class="fu">## Invasive mechanical ventilation (IMV)</span></span>
<span id="cb24-174"><a href="#cb24-174" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-175"><a href="#cb24-175" aria-hidden="true" tabindex="-1"></a>Understanding the numbers of patients receiving IMV, and the timing of IMV, is essential to the study.</span>
<span id="cb24-176"><a href="#cb24-176" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-177"><a href="#cb24-177" aria-hidden="true" tabindex="-1"></a>First we will load data. This takes time, so we will separate it from other processing so it can be cached.</span>
<span id="cb24-178"><a href="#cb24-178" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-181"><a href="#cb24-181" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb24-182"><a href="#cb24-182" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: load respiratory support</span></span>
<span id="cb24-183"><a href="#cb24-183" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-184"><a href="#cb24-184" aria-hidden="true" tabindex="-1"></a><span class="co"># Get ventilator data and just limit to patient encounters we are interested in</span></span>
<span id="cb24-185"><a href="#cb24-185" aria-hidden="true" tabindex="-1"></a>df_vent <span class="ot">&lt;-</span> <span class="fu">load_resp_support</span>(<span class="fu">paste0</span>(data_path, fname_imv))</span>
<span id="cb24-186"><a href="#cb24-186" aria-hidden="true" tabindex="-1"></a>df_vent_wide <span class="ot">&lt;-</span> <span class="fu">clean_resp_support</span>(df_vent)</span>
<span id="cb24-187"><a href="#cb24-187" aria-hidden="true" tabindex="-1"></a>df_resp_episodes <span class="ot">&lt;-</span> <span class="fu">classify_resp_support</span>(df_vent_wide)</span>
<span id="cb24-188"><a href="#cb24-188" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-189"><a href="#cb24-189" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb24-190"><a href="#cb24-190" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-191"><a href="#cb24-191" aria-hidden="true" tabindex="-1"></a>Now, we will get some counts.</span>
<span id="cb24-192"><a href="#cb24-192" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-195"><a href="#cb24-195" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb24-196"><a href="#cb24-196" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: count IMV</span></span>
<span id="cb24-197"><a href="#cb24-197" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-198"><a href="#cb24-198" aria-hidden="true" tabindex="-1"></a><span class="co"># Only keep IMV data, and relabel each episode number</span></span>
<span id="cb24-199"><a href="#cb24-199" aria-hidden="true" tabindex="-1"></a>df_vent_episodes <span class="ot">&lt;-</span> df_resp_episodes <span class="sc">%&gt;%</span> <span class="fu">filter</span>(current_support <span class="sc">==</span> <span class="st">'imv'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb24-200"><a href="#cb24-200" aria-hidden="true" tabindex="-1"></a>     <span class="fu">rename</span>(<span class="at">vent_time_start =</span> support_time_start,</span>
<span id="cb24-201"><a href="#cb24-201" aria-hidden="true" tabindex="-1"></a>            <span class="at">vent_time_stop =</span> support_time_stop,</span>
<span id="cb24-202"><a href="#cb24-202" aria-hidden="true" tabindex="-1"></a>            <span class="at">vent_episode =</span> support_episode) </span>
<span id="cb24-203"><a href="#cb24-203" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-204"><a href="#cb24-204" aria-hidden="true" tabindex="-1"></a><span class="co"># Only keep vent episodes for at least 24 hours</span></span>
<span id="cb24-205"><a href="#cb24-205" aria-hidden="true" tabindex="-1"></a>df_vent_episodes <span class="ot">&lt;-</span> df_vent_episodes <span class="sc">%&gt;%</span> </span>
<span id="cb24-206"><a href="#cb24-206" aria-hidden="true" tabindex="-1"></a>     <span class="fu">filter</span>(timediff <span class="sc">&gt;=</span> <span class="fu">hours</span>(<span class="dv">24</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb24-207"><a href="#cb24-207" aria-hidden="true" tabindex="-1"></a>     <span class="fu">group_by</span>(enc_id) <span class="sc">%&gt;%</span></span>
<span id="cb24-208"><a href="#cb24-208" aria-hidden="true" tabindex="-1"></a>     <span class="fu">arrange</span>(vent_episode) <span class="sc">%&gt;%</span></span>
<span id="cb24-209"><a href="#cb24-209" aria-hidden="true" tabindex="-1"></a>     <span class="fu">mutate</span>(<span class="at">vent_episode =</span> <span class="fu">row_number</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb24-210"><a href="#cb24-210" aria-hidden="true" tabindex="-1"></a>     <span class="fu">ungroup</span>()</span>
<span id="cb24-211"><a href="#cb24-211" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-212"><a href="#cb24-212" aria-hidden="true" tabindex="-1"></a><span class="co"># Join based on encounter ID, and whether the intervals for (vent start, vent stop) and (icu start, icu stop) have any overlap. This ensures we include patients intubated in the ED or a procedural area</span></span>
<span id="cb24-213"><a href="#cb24-213" aria-hidden="true" tabindex="-1"></a>by <span class="ot">&lt;-</span> <span class="fu">join_by</span>(enc_id, </span>
<span id="cb24-214"><a href="#cb24-214" aria-hidden="true" tabindex="-1"></a>              <span class="fu">overlaps</span>(x<span class="sc">$</span>vent_time_start, x<span class="sc">$</span>vent_time_stop,</span>
<span id="cb24-215"><a href="#cb24-215" aria-hidden="true" tabindex="-1"></a>                       y<span class="sc">$</span>icu_start_date, y<span class="sc">$</span>icu_stop_date))</span>
<span id="cb24-216"><a href="#cb24-216" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-217"><a href="#cb24-217" aria-hidden="true" tabindex="-1"></a>df_vent_episodes <span class="ot">&lt;-</span> <span class="fu">inner_join</span>(df_vent_episodes, df_picu_startstop, by) <span class="sc">%&gt;%</span></span>
<span id="cb24-218"><a href="#cb24-218" aria-hidden="true" tabindex="-1"></a>     <span class="fu">inner_join</span>(df_encounters, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">'mrn'</span>, <span class="st">'enc_id'</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb24-219"><a href="#cb24-219" aria-hidden="true" tabindex="-1"></a>     <span class="fu">relocate</span>(mrn, enc_id)</span>
<span id="cb24-220"><a href="#cb24-220" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-221"><a href="#cb24-221" aria-hidden="true" tabindex="-1"></a><span class="co"># How many ventilator episodes, encounters, and among unique patients?</span></span>
<span id="cb24-222"><a href="#cb24-222" aria-hidden="true" tabindex="-1"></a>n_vent_ep <span class="ot">&lt;-</span> df_vent_episodes <span class="sc">%&gt;%</span> <span class="fu">nrow</span>()</span>
<span id="cb24-223"><a href="#cb24-223" aria-hidden="true" tabindex="-1"></a>n_vent_picu <span class="ot">&lt;-</span> df_vent_episodes <span class="sc">%&gt;%</span> <span class="fu">distinct</span>(icu_start_date) <span class="sc">%&gt;%</span> <span class="fu">nrow</span>()</span>
<span id="cb24-224"><a href="#cb24-224" aria-hidden="true" tabindex="-1"></a>n_vent_mrn <span class="ot">&lt;-</span> df_vent_episodes <span class="sc">%&gt;%</span> <span class="fu">distinct</span>(mrn) <span class="sc">%&gt;%</span> <span class="fu">nrow</span>()</span>
<span id="cb24-225"><a href="#cb24-225" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-226"><a href="#cb24-226" aria-hidden="true" tabindex="-1"></a>display_array <span class="ot">&lt;-</span> <span class="fu">c</span>(n_vent_ep, n_vent_picu, n_vent_mrn)</span>
<span id="cb24-227"><a href="#cb24-227" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(display_array) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">'Episodes of IMV'</span>, <span class="st">'PICU stays with IMV'</span>, <span class="st">'Unique patients requiring IMV'</span>)</span>
<span id="cb24-228"><a href="#cb24-228" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-229"><a href="#cb24-229" aria-hidden="true" tabindex="-1"></a><span class="co"># display_table &lt;- tibble(`Episodes of IMV` = n_vent_ep, </span></span>
<span id="cb24-230"><a href="#cb24-230" aria-hidden="true" tabindex="-1"></a>       <span class="co"># `PICU stays with IMV` = n_vent_picu,</span></span>
<span id="cb24-231"><a href="#cb24-231" aria-hidden="true" tabindex="-1"></a>       <span class="co"># `Unique patients requiring IMV` = n_vent_mrn)</span></span>
<span id="cb24-232"><a href="#cb24-232" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-233"><a href="#cb24-233" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(display_array, </span>
<span id="cb24-234"><a href="#cb24-234" aria-hidden="true" tabindex="-1"></a>      <span class="at">format =</span> <span class="st">"markdown"</span>, </span>
<span id="cb24-235"><a href="#cb24-235" aria-hidden="true" tabindex="-1"></a>      <span class="at">align =</span> <span class="st">"c"</span>,</span>
<span id="cb24-236"><a href="#cb24-236" aria-hidden="true" tabindex="-1"></a>      <span class="at">caption =</span> <span class="cn">NULL</span>,</span>
<span id="cb24-237"><a href="#cb24-237" aria-hidden="true" tabindex="-1"></a>      <span class="at">col.names =</span> <span class="st">'N'</span>)</span>
<span id="cb24-238"><a href="#cb24-238" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb24-239"><a href="#cb24-239" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-240"><a href="#cb24-240" aria-hidden="true" tabindex="-1"></a><span class="fu">## Physical therapy</span></span>
<span id="cb24-241"><a href="#cb24-241" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-242"><a href="#cb24-242" aria-hidden="true" tabindex="-1"></a>Physical therapy is logged in flowsheets. For the most part, the physical therapists log the total amount of time they worked. Some physical therapists also log the specific activities they performed (such as gait training, wheel chair training, etc). This may or may not be consistent and will need some QAing.</span>
<span id="cb24-243"><a href="#cb24-243" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-246"><a href="#cb24-246" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb24-247"><a href="#cb24-247" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: load PT</span></span>
<span id="cb24-248"><a href="#cb24-248" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-249"><a href="#cb24-249" aria-hidden="true" tabindex="-1"></a>df_pt <span class="ot">&lt;-</span> <span class="fu">read_delim</span>(<span class="fu">paste0</span>(data_path, <span class="st">'/Report 8F - Physical Therapy.txt'</span>),</span>
<span id="cb24-250"><a href="#cb24-250" aria-hidden="true" tabindex="-1"></a>                    <span class="at">delim =</span> <span class="st">"|"</span>,</span>
<span id="cb24-251"><a href="#cb24-251" aria-hidden="true" tabindex="-1"></a>                    <span class="at">escape_double =</span> <span class="cn">FALSE</span>,</span>
<span id="cb24-252"><a href="#cb24-252" aria-hidden="true" tabindex="-1"></a>                    <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">PAT_ENC_CSN_ID =</span> <span class="fu">col_character</span>(),</span>
<span id="cb24-253"><a href="#cb24-253" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">MRN =</span> <span class="fu">col_character</span>(),</span>
<span id="cb24-254"><a href="#cb24-254" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">FLOWSHEET_NAME =</span> <span class="fu">col_character</span>(),</span>
<span id="cb24-255"><a href="#cb24-255" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">MEASURE_VALUE =</span> <span class="fu">col_number</span>(),</span>
<span id="cb24-256"><a href="#cb24-256" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">RECORDED_TIME =</span> <span class="fu">col_datetime</span>(<span class="at">format =</span> <span class="st">"%Y-%m-%d %H:%M:%S"</span>)),</span>
<span id="cb24-257"><a href="#cb24-257" aria-hidden="true" tabindex="-1"></a>                    <span class="at">trim_ws =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb24-258"><a href="#cb24-258" aria-hidden="true" tabindex="-1"></a>     <span class="fu">clean_names</span>() <span class="sc">%&gt;%</span></span>
<span id="cb24-259"><a href="#cb24-259" aria-hidden="true" tabindex="-1"></a>     <span class="fu">select</span>(mrn, <span class="at">enc_id =</span> pat_enc_csn_id, <span class="fu">everything</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb24-260"><a href="#cb24-260" aria-hidden="true" tabindex="-1"></a>     <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.character), str_to_lower)) <span class="sc">%&gt;%</span></span>
<span id="cb24-261"><a href="#cb24-261" aria-hidden="true" tabindex="-1"></a>     <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.character), <span class="sc">~</span> <span class="fu">str_remove_all</span>(.x, <span class="st">'^r nyc '</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb24-262"><a href="#cb24-262" aria-hidden="true" tabindex="-1"></a>     <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.character), <span class="sc">~</span> <span class="fu">str_remove_all</span>(.x, <span class="st">'^r rhb '</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb24-263"><a href="#cb24-263" aria-hidden="true" tabindex="-1"></a>     <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.character), <span class="sc">~</span> <span class="fu">str_remove_all</span>(.x, <span class="st">'^rhb '</span>)))</span>
<span id="cb24-264"><a href="#cb24-264" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-265"><a href="#cb24-265" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb24-266"><a href="#cb24-266" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-267"><a href="#cb24-267" aria-hidden="true" tabindex="-1"></a>There is a kind of variable called "PT received on" which is where the PT entered the date they supposedly provided PT. However, they always log PT when provided and there are multiple instances of the incorrect date being logged (such as a date in the future). Because of this, we will only use the date at the time PT was logged, rather than what the therapist manually entered. If we do need to use it, the date is recorded as the number of days after 12/31/1840 (unclear why). To convert this to a date, you can use:</span>
<span id="cb24-268"><a href="#cb24-268" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-269"><a href="#cb24-269" aria-hidden="true" tabindex="-1"></a><span class="in">``` r</span></span>
<span id="cb24-270"><a href="#cb24-270" aria-hidden="true" tabindex="-1"></a><span class="fu">mutate</span>(<span class="at">pt_received_on =</span> <span class="fu">days</span>(pt_received_on) <span class="sc">+</span> <span class="fu">ymd</span>(<span class="st">'1840-12-31'</span>))</span>
<span id="cb24-271"><a href="#cb24-271" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb24-272"><a href="#cb24-272" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-273"><a href="#cb24-273" aria-hidden="true" tabindex="-1"></a>There are also many kinds flowsheet rows being documented on. Not all are really relevant to our purposes. They are:</span>
<span id="cb24-274"><a href="#cb24-274" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-277"><a href="#cb24-277" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb24-278"><a href="#cb24-278" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: PT flowsheet types</span></span>
<span id="cb24-279"><a href="#cb24-279" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-280"><a href="#cb24-280" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-281"><a href="#cb24-281" aria-hidden="true" tabindex="-1"></a><span class="co"># Print all flowsheet names</span></span>
<span id="cb24-282"><a href="#cb24-282" aria-hidden="true" tabindex="-1"></a>df_pt <span class="sc">%&gt;%</span> <span class="fu">distinct</span>(flowsheet_name) <span class="sc">%&gt;%</span> <span class="fu">print</span>(<span class="at">n=</span><span class="cn">Inf</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb24-283"><a href="#cb24-283" aria-hidden="true" tabindex="-1"></a>     <span class="fu">kable</span>(<span class="at">format =</span> <span class="st">'markdown'</span>)</span>
<span id="cb24-284"><a href="#cb24-284" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-285"><a href="#cb24-285" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb24-286"><a href="#cb24-286" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-287"><a href="#cb24-287" aria-hidden="true" tabindex="-1"></a>Most of these differentiate the amount of time spent on a given task. It's not always clear which of these are active versus passive in terms of participation of the patient. Some also seem irrelevant. We will dictate all of the relevant ones as:</span>
<span id="cb24-288"><a href="#cb24-288" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-289"><a href="#cb24-289" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>therapeutic activity time entry</span>
<span id="cb24-290"><a href="#cb24-290" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-291"><a href="#cb24-291" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>ip pt time calculation</span>
<span id="cb24-292"><a href="#cb24-292" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-293"><a href="#cb24-293" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>pt re-evaluation time entry</span>
<span id="cb24-294"><a href="#cb24-294" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-295"><a href="#cb24-295" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>gait training time entry</span>
<span id="cb24-296"><a href="#cb24-296" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-297"><a href="#cb24-297" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>neuromuscular re-education time entry</span>
<span id="cb24-298"><a href="#cb24-298" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-299"><a href="#cb24-299" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>self care/home management (adls) time entry</span>
<span id="cb24-300"><a href="#cb24-300" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-301"><a href="#cb24-301" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>therapeutic exercise time entry</span>
<span id="cb24-302"><a href="#cb24-302" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-303"><a href="#cb24-303" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>therapeutic activity comments</span>
<span id="cb24-304"><a href="#cb24-304" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-305"><a href="#cb24-305" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>therapeutic exercise comments</span>
<span id="cb24-306"><a href="#cb24-306" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-307"><a href="#cb24-307" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>gait training comments</span>
<span id="cb24-308"><a href="#cb24-308" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-309"><a href="#cb24-309" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>manual therapy time entry</span>
<span id="cb24-310"><a href="#cb24-310" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-311"><a href="#cb24-311" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>orthotic/prosthetic management and/or training time entry</span>
<span id="cb24-312"><a href="#cb24-312" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-313"><a href="#cb24-313" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>wheelchair management time entry</span>
<span id="cb24-314"><a href="#cb24-314" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-315"><a href="#cb24-315" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>pt eval treat tolerance</span>
<span id="cb24-316"><a href="#cb24-316" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-317"><a href="#cb24-317" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>prosthetic training time entry</span>
<span id="cb24-318"><a href="#cb24-318" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-319"><a href="#cb24-319" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>therapeutic massage time entry</span>
<span id="cb24-320"><a href="#cb24-320" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-321"><a href="#cb24-321" aria-hidden="true" tabindex="-1"></a>(It might seem odd that we are keeping "comments." The reason is that in a subsequentstep, we enforce that only numeric values are retained. Often the amount of time spent is erroneously entered as a "comment" so we will keep these.)</span>
<span id="cb24-322"><a href="#cb24-322" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-323"><a href="#cb24-323" aria-hidden="true" tabindex="-1"></a>In the next step, we save all of these types of PT as a wide format data frame. Now we have access to each type of PT in case we need it for later.</span>
<span id="cb24-324"><a href="#cb24-324" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-325"><a href="#cb24-325" aria-hidden="true" tabindex="-1"></a>The variable <span class="in">`ip_pt_time_calculation`</span> appears to be the total of all other types of PT being provided. The other units specify the PT being provided, which all sum to this variable. Therefore <span class="in">`ip_pt_time_calculation`</span> is the most important variable here and the one we will use as the basis for how much PT is provided.</span>
<span id="cb24-326"><a href="#cb24-326" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-329"><a href="#cb24-329" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb24-330"><a href="#cb24-330" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: PT types</span></span>
<span id="cb24-331"><a href="#cb24-331" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-332"><a href="#cb24-332" aria-hidden="true" tabindex="-1"></a><span class="co"># Relevant types of PT rows...</span></span>
<span id="cb24-333"><a href="#cb24-333" aria-hidden="true" tabindex="-1"></a>relevant_pt <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">'therapeutic activity time entry'</span>,</span>
<span id="cb24-334"><a href="#cb24-334" aria-hidden="true" tabindex="-1"></a>                 <span class="st">'ip pt time calculation'</span>,</span>
<span id="cb24-335"><a href="#cb24-335" aria-hidden="true" tabindex="-1"></a>                 <span class="co"># 'pt received on',</span></span>
<span id="cb24-336"><a href="#cb24-336" aria-hidden="true" tabindex="-1"></a>                 <span class="st">'pt re-evaluation time entry'</span>,</span>
<span id="cb24-337"><a href="#cb24-337" aria-hidden="true" tabindex="-1"></a>                 <span class="st">'gait training time entry'</span>,</span>
<span id="cb24-338"><a href="#cb24-338" aria-hidden="true" tabindex="-1"></a>                 <span class="st">'neuromuscular re-education time entry'</span>,</span>
<span id="cb24-339"><a href="#cb24-339" aria-hidden="true" tabindex="-1"></a>                 <span class="st">'self care/home management (adls) time entry'</span>,</span>
<span id="cb24-340"><a href="#cb24-340" aria-hidden="true" tabindex="-1"></a>                 <span class="st">'therapeutic exercise time entry'</span>,</span>
<span id="cb24-341"><a href="#cb24-341" aria-hidden="true" tabindex="-1"></a>                 <span class="st">'therapeutic activity comments'</span>,</span>
<span id="cb24-342"><a href="#cb24-342" aria-hidden="true" tabindex="-1"></a>                 <span class="st">'therapeutic exercise comments'</span>,</span>
<span id="cb24-343"><a href="#cb24-343" aria-hidden="true" tabindex="-1"></a>                 <span class="co"># 'orthotic management training time entry',</span></span>
<span id="cb24-344"><a href="#cb24-344" aria-hidden="true" tabindex="-1"></a>                  <span class="st">'gait training comments'</span>,</span>
<span id="cb24-345"><a href="#cb24-345" aria-hidden="true" tabindex="-1"></a>                 <span class="co"># 'cognitive function direct pt contact',</span></span>
<span id="cb24-346"><a href="#cb24-346" aria-hidden="true" tabindex="-1"></a>                 <span class="st">'manual therapy time entry'</span>,</span>
<span id="cb24-347"><a href="#cb24-347" aria-hidden="true" tabindex="-1"></a>                 <span class="st">'orthotic/prosthetic management and/or training time entry'</span>,</span>
<span id="cb24-348"><a href="#cb24-348" aria-hidden="true" tabindex="-1"></a>                 <span class="co"># 'canalith repositioning time entry',</span></span>
<span id="cb24-349"><a href="#cb24-349" aria-hidden="true" tabindex="-1"></a>                 <span class="st">'wheelchair management time entry'</span>,</span>
<span id="cb24-350"><a href="#cb24-350" aria-hidden="true" tabindex="-1"></a>                 <span class="st">'pt eval treat tolerance'</span>,</span>
<span id="cb24-351"><a href="#cb24-351" aria-hidden="true" tabindex="-1"></a>                 <span class="co"># 'group therapy time entry',</span></span>
<span id="cb24-352"><a href="#cb24-352" aria-hidden="true" tabindex="-1"></a>                 <span class="st">'prosthetic training time entry'</span>,</span>
<span id="cb24-353"><a href="#cb24-353" aria-hidden="true" tabindex="-1"></a>                 <span class="st">'therapeutic massage time entry'</span></span>
<span id="cb24-354"><a href="#cb24-354" aria-hidden="true" tabindex="-1"></a>                 )</span>
<span id="cb24-355"><a href="#cb24-355" aria-hidden="true" tabindex="-1"></a>relevant_pt_str <span class="ot">&lt;-</span> <span class="fu">str_flatten</span>(relevant_pt, <span class="at">collapse =</span> <span class="st">'|'</span>)</span>
<span id="cb24-356"><a href="#cb24-356" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-357"><a href="#cb24-357" aria-hidden="true" tabindex="-1"></a><span class="co"># Keep only relevant kinds of PT</span></span>
<span id="cb24-358"><a href="#cb24-358" aria-hidden="true" tabindex="-1"></a>df_pt <span class="ot">&lt;-</span> df_pt <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="fu">str_detect</span>(flowsheet_name, relevant_pt_str))</span>
<span id="cb24-359"><a href="#cb24-359" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-360"><a href="#cb24-360" aria-hidden="true" tabindex="-1"></a><span class="co"># Make sure all types are numeric</span></span>
<span id="cb24-361"><a href="#cb24-361" aria-hidden="true" tabindex="-1"></a>df_pt <span class="ot">&lt;-</span> df_pt <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">measure_value =</span> <span class="fu">as.numeric</span>(measure_value))</span>
<span id="cb24-362"><a href="#cb24-362" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-363"><a href="#cb24-363" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove any 0-time units</span></span>
<span id="cb24-364"><a href="#cb24-364" aria-hidden="true" tabindex="-1"></a>df_pt <span class="ot">&lt;-</span> df_pt <span class="sc">%&gt;%</span> <span class="fu">filter</span>(measure_value <span class="sc">&gt;</span> <span class="dv">0</span>)</span>
<span id="cb24-365"><a href="#cb24-365" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-366"><a href="#cb24-366" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert to wide format</span></span>
<span id="cb24-367"><a href="#cb24-367" aria-hidden="true" tabindex="-1"></a>df_pt_wide <span class="ot">&lt;-</span> df_pt <span class="sc">%&gt;%</span></span>
<span id="cb24-368"><a href="#cb24-368" aria-hidden="true" tabindex="-1"></a>     <span class="fu">pivot_wider</span>(<span class="at">id_cols =</span> <span class="fu">c</span>(<span class="st">'mrn'</span>, <span class="st">'enc_id'</span>, <span class="st">'recorded_time'</span>),</span>
<span id="cb24-369"><a href="#cb24-369" aria-hidden="true" tabindex="-1"></a>                 <span class="at">names_from =</span> flowsheet_name,</span>
<span id="cb24-370"><a href="#cb24-370" aria-hidden="true" tabindex="-1"></a>                 <span class="at">values_from =</span> measure_value) <span class="sc">%&gt;%</span></span>
<span id="cb24-371"><a href="#cb24-371" aria-hidden="true" tabindex="-1"></a>     <span class="fu">clean_names</span>()</span>
<span id="cb24-372"><a href="#cb24-372" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-373"><a href="#cb24-373" aria-hidden="true" tabindex="-1"></a><span class="co"># Just keep a version with total time</span></span>
<span id="cb24-374"><a href="#cb24-374" aria-hidden="true" tabindex="-1"></a>df_pt_total <span class="ot">&lt;-</span> df_pt_wide <span class="sc">%&gt;%</span></span>
<span id="cb24-375"><a href="#cb24-375" aria-hidden="true" tabindex="-1"></a>     <span class="fu">select</span>(mrn, enc_id, recorded_time, <span class="at">pt_time =</span> ip_pt_time_calculation) <span class="sc">%&gt;%</span> </span>
<span id="cb24-376"><a href="#cb24-376" aria-hidden="true" tabindex="-1"></a>     <span class="fu">distinct</span>()</span>
<span id="cb24-377"><a href="#cb24-377" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-378"><a href="#cb24-378" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb24-379"><a href="#cb24-379" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-380"><a href="#cb24-380" aria-hidden="true" tabindex="-1"></a><span class="fu">### Amount of PT</span></span>
<span id="cb24-381"><a href="#cb24-381" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-382"><a href="#cb24-382" aria-hidden="true" tabindex="-1"></a>First we will describe, in general, how much PT is being delivered. We need to make sure that we only sum up PT that was delivered after the start of a PICU stay. To do this we take the <span class="in">`df_picu_startstop`</span> data frame, which contains ICU admit and discharge times. Create a few windows of time spanning 0-24 hours, 24-48 hours, and 48-72 hours. Also create an interval that spans 0-72 hours.</span>
<span id="cb24-383"><a href="#cb24-383" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-386"><a href="#cb24-386" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb24-387"><a href="#cb24-387" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: PT and PICU time joins</span></span>
<span id="cb24-388"><a href="#cb24-388" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-389"><a href="#cb24-389" aria-hidden="true" tabindex="-1"></a><span class="co"># Update the PICU start/stop so that it has a timestamp and intervals</span></span>
<span id="cb24-390"><a href="#cb24-390" aria-hidden="true" tabindex="-1"></a><span class="co"># for 24, 48, and 72 hours</span></span>
<span id="cb24-391"><a href="#cb24-391" aria-hidden="true" tabindex="-1"></a>df_temp <span class="ot">&lt;-</span> df_picu_startstop <span class="sc">%&gt;%</span></span>
<span id="cb24-392"><a href="#cb24-392" aria-hidden="true" tabindex="-1"></a>     <span class="fu">mutate</span>(<span class="at">t24 =</span> icu_start_date <span class="sc">+</span> <span class="fu">hours</span>(<span class="dv">24</span>),</span>
<span id="cb24-393"><a href="#cb24-393" aria-hidden="true" tabindex="-1"></a>            <span class="at">t48 =</span> icu_start_date <span class="sc">+</span> <span class="fu">hours</span>(<span class="dv">48</span>),</span>
<span id="cb24-394"><a href="#cb24-394" aria-hidden="true" tabindex="-1"></a>            <span class="at">t72 =</span> icu_start_date <span class="sc">+</span> <span class="fu">hours</span>(<span class="dv">72</span>),</span>
<span id="cb24-395"><a href="#cb24-395" aria-hidden="true" tabindex="-1"></a>            <span class="at">int0_72 =</span> <span class="fu">interval</span>(icu_start_date, t72),</span>
<span id="cb24-396"><a href="#cb24-396" aria-hidden="true" tabindex="-1"></a>            <span class="at">int0_24 =</span> <span class="fu">interval</span>(icu_start_date, t24),</span>
<span id="cb24-397"><a href="#cb24-397" aria-hidden="true" tabindex="-1"></a>            <span class="at">int24_48 =</span> <span class="fu">interval</span>(t24, t48),</span>
<span id="cb24-398"><a href="#cb24-398" aria-hidden="true" tabindex="-1"></a>            <span class="at">int48_72 =</span> <span class="fu">interval</span>(t48, t72)</span>
<span id="cb24-399"><a href="#cb24-399" aria-hidden="true" tabindex="-1"></a>            )</span>
<span id="cb24-400"><a href="#cb24-400" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-401"><a href="#cb24-401" aria-hidden="true" tabindex="-1"></a><span class="co"># Label the 1st hospitalization</span></span>
<span id="cb24-402"><a href="#cb24-402" aria-hidden="true" tabindex="-1"></a>df_temp <span class="ot">&lt;-</span> df_temp <span class="sc">%&gt;%</span> </span>
<span id="cb24-403"><a href="#cb24-403" aria-hidden="true" tabindex="-1"></a>     <span class="fu">group_by</span>(mrn, enc_id) <span class="sc">%&gt;%</span> </span>
<span id="cb24-404"><a href="#cb24-404" aria-hidden="true" tabindex="-1"></a>     <span class="fu">arrange</span>(mrn, enc_id, icu_start_date) <span class="sc">%&gt;%</span> </span>
<span id="cb24-405"><a href="#cb24-405" aria-hidden="true" tabindex="-1"></a>     <span class="fu">mutate</span>(<span class="at">icu_stay =</span> <span class="fu">row_number</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb24-406"><a href="#cb24-406" aria-hidden="true" tabindex="-1"></a>     <span class="fu">ungroup</span>()</span>
<span id="cb24-407"><a href="#cb24-407" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-408"><a href="#cb24-408" aria-hidden="true" tabindex="-1"></a><span class="co"># Create an inequality join so we make sure to only match PT that occurred after</span></span>
<span id="cb24-409"><a href="#cb24-409" aria-hidden="true" tabindex="-1"></a><span class="co"># the PICU start</span></span>
<span id="cb24-410"><a href="#cb24-410" aria-hidden="true" tabindex="-1"></a>pt_join_by <span class="ot">&lt;-</span> <span class="fu">join_by</span>(mrn, enc_id, x<span class="sc">$</span>icu_start_date <span class="sc">&lt;</span> y<span class="sc">$</span>recorded_time)</span>
<span id="cb24-411"><a href="#cb24-411" aria-hidden="true" tabindex="-1"></a>df_pt_picu <span class="ot">&lt;-</span> <span class="fu">left_join</span>(df_temp, df_pt_total, <span class="at">by =</span> pt_join_by, <span class="at">relationship =</span> <span class="st">"many-to-many"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb24-412"><a href="#cb24-412" aria-hidden="true" tabindex="-1"></a>     <span class="fu">relocate</span>(mrn, enc_id, icu_stay, icu_start_date, icu_stop_date, recorded_time, pt_time)</span>
<span id="cb24-413"><a href="#cb24-413" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-414"><a href="#cb24-414" aria-hidden="true" tabindex="-1"></a><span class="co"># Only keep 1st hospitalization</span></span>
<span id="cb24-415"><a href="#cb24-415" aria-hidden="true" tabindex="-1"></a><span class="co"># df_pt_picu &lt;- df_pt_picu %&gt;% filter(icu_stay == 1)</span></span>
<span id="cb24-416"><a href="#cb24-416" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-417"><a href="#cb24-417" aria-hidden="true" tabindex="-1"></a><span class="co"># Determine whether each episode of PT fell in a given interval</span></span>
<span id="cb24-418"><a href="#cb24-418" aria-hidden="true" tabindex="-1"></a>df_pt_timing <span class="ot">&lt;-</span> df_pt_picu <span class="sc">%&gt;%</span></span>
<span id="cb24-419"><a href="#cb24-419" aria-hidden="true" tabindex="-1"></a>     <span class="fu">mutate</span>(<span class="at">early_pt =</span> <span class="fu">if_else</span>(recorded_time <span class="sc">%within%</span> int0_72, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span>),</span>
<span id="cb24-420"><a href="#cb24-420" aria-hidden="true" tabindex="-1"></a>            <span class="at">any_pt =</span> <span class="fu">if_else</span>(recorded_time <span class="sc">&gt;</span> icu_start_date, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span>),</span>
<span id="cb24-421"><a href="#cb24-421" aria-hidden="true" tabindex="-1"></a>            <span class="at">icu_pt =</span> <span class="fu">if_else</span>(recorded_time <span class="sc">%within%</span> <span class="fu">interval</span>(icu_start_date, icu_stop_date), <span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span>),</span>
<span id="cb24-422"><a href="#cb24-422" aria-hidden="true" tabindex="-1"></a>            <span class="at">pt0_24 =</span> <span class="fu">if_else</span>(recorded_time  <span class="sc">%within%</span> int0_24, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span>),</span>
<span id="cb24-423"><a href="#cb24-423" aria-hidden="true" tabindex="-1"></a>            <span class="at">pt24_48 =</span> <span class="fu">if_else</span>(recorded_time <span class="sc">%within%</span> int24_48, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span>),</span>
<span id="cb24-424"><a href="#cb24-424" aria-hidden="true" tabindex="-1"></a>            <span class="at">pt48_72 =</span> <span class="fu">if_else</span>(recorded_time <span class="sc">%within%</span> int48_72, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span>))</span>
<span id="cb24-425"><a href="#cb24-425" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-426"><a href="#cb24-426" aria-hidden="true" tabindex="-1"></a><span class="co"># Get counts of PT in each interval.</span></span>
<span id="cb24-427"><a href="#cb24-427" aria-hidden="true" tabindex="-1"></a>df_pt_counts <span class="ot">&lt;-</span> df_pt_timing <span class="sc">%&gt;%</span>  </span>
<span id="cb24-428"><a href="#cb24-428" aria-hidden="true" tabindex="-1"></a>     <span class="fu">group_by</span>(mrn, enc_id, icu_start_date) <span class="sc">%&gt;%</span> </span>
<span id="cb24-429"><a href="#cb24-429" aria-hidden="true" tabindex="-1"></a>     <span class="fu">summarize</span>(<span class="at">n_early_pt =</span> <span class="fu">sum</span>(early_pt), </span>
<span id="cb24-430"><a href="#cb24-430" aria-hidden="true" tabindex="-1"></a>               <span class="at">n_icu_pt =</span> <span class="fu">sum</span>(icu_pt), </span>
<span id="cb24-431"><a href="#cb24-431" aria-hidden="true" tabindex="-1"></a>               <span class="at">n_any_pt =</span> <span class="fu">sum</span>(any_pt), </span>
<span id="cb24-432"><a href="#cb24-432" aria-hidden="true" tabindex="-1"></a>               <span class="at">n_pt0_24 =</span> <span class="fu">sum</span>(pt0_24), </span>
<span id="cb24-433"><a href="#cb24-433" aria-hidden="true" tabindex="-1"></a>               <span class="at">n_pt24_48 =</span> <span class="fu">sum</span>(pt24_48), </span>
<span id="cb24-434"><a href="#cb24-434" aria-hidden="true" tabindex="-1"></a>               <span class="at">n_pt48_72 =</span> <span class="fu">sum</span>(pt48_72),</span>
<span id="cb24-435"><a href="#cb24-435" aria-hidden="true" tabindex="-1"></a>               <span class="at">n_pt_each =</span> <span class="fu">sum</span>(<span class="fu">if_else</span>((pt0_24 <span class="sc">&amp;</span> pt24_48) <span class="sc">|</span> (pt0_24 <span class="sc">&amp;</span> pt48_72) <span class="sc">|</span> (pt24_48 <span class="sc">&amp;</span> pt48_72), <span class="cn">TRUE</span>, <span class="cn">FALSE</span>)),</span>
<span id="cb24-436"><a href="#cb24-436" aria-hidden="true" tabindex="-1"></a>               <span class="at">.groups =</span> <span class="st">'drop'</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb24-437"><a href="#cb24-437" aria-hidden="true" tabindex="-1"></a>     <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">starts_with</span>(<span class="st">'n_'</span>), <span class="sc">~</span> <span class="fu">if_else</span>(.x <span class="sc">&gt;</span> <span class="dv">0</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>)))</span>
<span id="cb24-438"><a href="#cb24-438" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-439"><a href="#cb24-439" aria-hidden="true" tabindex="-1"></a><span class="co"># Get aggregate time of PT delivered in each interval. Need to do this separately because they all have different denominators</span></span>
<span id="cb24-440"><a href="#cb24-440" aria-hidden="true" tabindex="-1"></a>df_early_pt_timesum <span class="ot">&lt;-</span> df_pt_timing <span class="sc">%&gt;%</span> </span>
<span id="cb24-441"><a href="#cb24-441" aria-hidden="true" tabindex="-1"></a>     <span class="fu">filter</span>(early_pt) <span class="sc">%&gt;%</span> </span>
<span id="cb24-442"><a href="#cb24-442" aria-hidden="true" tabindex="-1"></a>     <span class="fu">group_by</span>(mrn, enc_id, icu_start_date) <span class="sc">%&gt;%</span> </span>
<span id="cb24-443"><a href="#cb24-443" aria-hidden="true" tabindex="-1"></a>     <span class="fu">summarize</span>(<span class="at">early_pt_time =</span> <span class="fu">sum</span>(pt_time))</span>
<span id="cb24-444"><a href="#cb24-444" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-445"><a href="#cb24-445" aria-hidden="true" tabindex="-1"></a>df_icu_pt_timesum <span class="ot">&lt;-</span> df_pt_timing <span class="sc">%&gt;%</span> </span>
<span id="cb24-446"><a href="#cb24-446" aria-hidden="true" tabindex="-1"></a>     <span class="fu">filter</span>(icu_pt) <span class="sc">%&gt;%</span> </span>
<span id="cb24-447"><a href="#cb24-447" aria-hidden="true" tabindex="-1"></a>     <span class="fu">group_by</span>(mrn, enc_id, icu_start_date) <span class="sc">%&gt;%</span> </span>
<span id="cb24-448"><a href="#cb24-448" aria-hidden="true" tabindex="-1"></a>     <span class="fu">summarize</span>(<span class="at">icu_pt_time =</span> <span class="fu">sum</span>(pt_time))</span>
<span id="cb24-449"><a href="#cb24-449" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-450"><a href="#cb24-450" aria-hidden="true" tabindex="-1"></a>df_any_pt_timesum <span class="ot">&lt;-</span> df_pt_timing <span class="sc">%&gt;%</span> </span>
<span id="cb24-451"><a href="#cb24-451" aria-hidden="true" tabindex="-1"></a>     <span class="fu">filter</span>(any_pt) <span class="sc">%&gt;%</span> </span>
<span id="cb24-452"><a href="#cb24-452" aria-hidden="true" tabindex="-1"></a>     <span class="fu">group_by</span>(mrn, enc_id, icu_start_date) <span class="sc">%&gt;%</span> </span>
<span id="cb24-453"><a href="#cb24-453" aria-hidden="true" tabindex="-1"></a>     <span class="fu">summarize</span>(<span class="at">any_pt_time =</span> <span class="fu">sum</span>(pt_time))</span>
<span id="cb24-454"><a href="#cb24-454" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-455"><a href="#cb24-455" aria-hidden="true" tabindex="-1"></a><span class="co"># Bind the 3 times together. </span></span>
<span id="cb24-456"><a href="#cb24-456" aria-hidden="true" tabindex="-1"></a>df_pt_timesums <span class="ot">&lt;-</span> <span class="fu">full_join</span>(df_early_pt_timesum, df_icu_pt_timesum) <span class="sc">%&gt;%</span> </span>
<span id="cb24-457"><a href="#cb24-457" aria-hidden="true" tabindex="-1"></a>     <span class="fu">full_join</span>(df_any_pt_timesum)</span>
<span id="cb24-458"><a href="#cb24-458" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-459"><a href="#cb24-459" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-460"><a href="#cb24-460" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb24-461"><a href="#cb24-461" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-462"><a href="#cb24-462" aria-hidden="true" tabindex="-1"></a>Now let's display some findings. First, display counts of ICU stays involving PT at varying time points. Note that that the sum of PT in the 0-24, 24-48, and 42-72 hour ranges can sum to more than the number of patients who received early PT (0-72 hours). This is because a patient could receive PT multiple times in the early range, e.g. at 0-24 and 24-48 hours. They would be counted in each range, but only once total for the 0-72 hour range.</span>
<span id="cb24-463"><a href="#cb24-463" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-466"><a href="#cb24-466" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb24-467"><a href="#cb24-467" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: display PT counts</span></span>
<span id="cb24-468"><a href="#cb24-468" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-469"><a href="#cb24-469" aria-hidden="true" tabindex="-1"></a><span class="co"># Now display tables of each.</span></span>
<span id="cb24-470"><a href="#cb24-470" aria-hidden="true" tabindex="-1"></a>df_pt_counts <span class="sc">%&gt;%</span> </span>
<span id="cb24-471"><a href="#cb24-471" aria-hidden="true" tabindex="-1"></a>     <span class="fu">tbl_summary</span>(<span class="at">include =</span> <span class="fu">starts_with</span>(<span class="st">'n_'</span>),</span>
<span id="cb24-472"><a href="#cb24-472" aria-hidden="true" tabindex="-1"></a>                 <span class="at">label =</span> <span class="fu">list</span>(n_early_pt <span class="sc">~</span> <span class="st">'Early PT (within 72 hours)'</span>,</span>
<span id="cb24-473"><a href="#cb24-473" aria-hidden="true" tabindex="-1"></a>                              n_icu_pt <span class="sc">~</span> <span class="st">'PT any time in the ICU'</span>,</span>
<span id="cb24-474"><a href="#cb24-474" aria-hidden="true" tabindex="-1"></a>                              n_any_pt <span class="sc">~</span> <span class="st">'PT any time in the hospital'</span>,</span>
<span id="cb24-475"><a href="#cb24-475" aria-hidden="true" tabindex="-1"></a>                              n_pt0_24 <span class="sc">~</span> <span class="st">'PT within 0-24 hours'</span>,</span>
<span id="cb24-476"><a href="#cb24-476" aria-hidden="true" tabindex="-1"></a>                              n_pt24_48 <span class="sc">~</span> <span class="st">'PT within 24-48 hours'</span>,</span>
<span id="cb24-477"><a href="#cb24-477" aria-hidden="true" tabindex="-1"></a>                              n_pt48_72 <span class="sc">~</span> <span class="st">'PT within 48-72 hours'</span>,</span>
<span id="cb24-478"><a href="#cb24-478" aria-hidden="true" tabindex="-1"></a>                              n_pt_each <span class="sc">~</span> <span class="st">'Early PT on any 2 days'</span>))</span>
<span id="cb24-479"><a href="#cb24-479" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-480"><a href="#cb24-480" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-481"><a href="#cb24-481" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb24-482"><a href="#cb24-482" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-483"><a href="#cb24-483" aria-hidden="true" tabindex="-1"></a>Next, display the amount of PT (in hours) that was received.</span>
<span id="cb24-484"><a href="#cb24-484" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-487"><a href="#cb24-487" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb24-488"><a href="#cb24-488" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: display PT duration</span></span>
<span id="cb24-489"><a href="#cb24-489" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-490"><a href="#cb24-490" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-491"><a href="#cb24-491" aria-hidden="true" tabindex="-1"></a>df_pt_timesums <span class="sc">%&gt;%</span> </span>
<span id="cb24-492"><a href="#cb24-492" aria-hidden="true" tabindex="-1"></a>     <span class="fu">tbl_summary</span>(<span class="at">include =</span> <span class="fu">ends_with</span>(<span class="st">'_time'</span>),</span>
<span id="cb24-493"><a href="#cb24-493" aria-hidden="true" tabindex="-1"></a>                 <span class="at">label =</span> <span class="fu">list</span>(early_pt_time <span class="sc">~</span> <span class="st">'Duration of PT within first 72 hours, minutes'</span>,</span>
<span id="cb24-494"><a href="#cb24-494" aria-hidden="true" tabindex="-1"></a>                              icu_pt_time <span class="sc">~</span> <span class="st">'Duration of PT within ICU, minutes'</span>,</span>
<span id="cb24-495"><a href="#cb24-495" aria-hidden="true" tabindex="-1"></a>                              any_pt_time <span class="sc">~</span> <span class="st">'Duration of PT within the hospital, minutes'</span>),</span>
<span id="cb24-496"><a href="#cb24-496" aria-hidden="true" tabindex="-1"></a>                 <span class="at">missing =</span> <span class="st">'no'</span>,</span>
<span id="cb24-497"><a href="#cb24-497" aria-hidden="true" tabindex="-1"></a>                 <span class="at">statistic =</span> <span class="fu">list</span>(<span class="fu">all_continuous</span>() <span class="sc">~</span> <span class="st">'{median} [{p25}-{p75}] - {N_nonmiss} patients'</span>))</span>
<span id="cb24-498"><a href="#cb24-498" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-499"><a href="#cb24-499" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb24-500"><a href="#cb24-500" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-501"><a href="#cb24-501" aria-hidden="true" tabindex="-1"></a><span class="fu">## IMV within 24 (and 72) hours of PICU hospitalization</span></span>
<span id="cb24-502"><a href="#cb24-502" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-503"><a href="#cb24-503" aria-hidden="true" tabindex="-1"></a>Since PT is likely less commonly provided to patients during IMV, we should know which patients had IMV early in the PICU hospitalization. We can use the "df_temp" data frame that we created above since this already has 24 and 72 hour computations.</span>
<span id="cb24-504"><a href="#cb24-504" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-507"><a href="#cb24-507" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb24-508"><a href="#cb24-508" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: early imv and PT comparison</span></span>
<span id="cb24-509"><a href="#cb24-509" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-510"><a href="#cb24-510" aria-hidden="true" tabindex="-1"></a><span class="co"># Get patients who had early (or not early) ventilation in the ICU</span></span>
<span id="cb24-511"><a href="#cb24-511" aria-hidden="true" tabindex="-1"></a>df_vent_temp <span class="ot">&lt;-</span> df_vent_episodes <span class="sc">%&gt;%</span> </span>
<span id="cb24-512"><a href="#cb24-512" aria-hidden="true" tabindex="-1"></a>     <span class="fu">select</span>(mrn, enc_id, vent_episode, vent_time_start, vent_time_stop)</span>
<span id="cb24-513"><a href="#cb24-513" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-514"><a href="#cb24-514" aria-hidden="true" tabindex="-1"></a>ventjoinby24 <span class="ot">&lt;-</span> <span class="fu">join_by</span>(mrn, enc_id, <span class="fu">overlaps</span>(x<span class="sc">$</span>icu_start_date, x<span class="sc">$</span>t24,</span>
<span id="cb24-515"><a href="#cb24-515" aria-hidden="true" tabindex="-1"></a>                                            y<span class="sc">$</span>vent_time_start, y<span class="sc">$</span>vent_time_stop))</span>
<span id="cb24-516"><a href="#cb24-516" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-517"><a href="#cb24-517" aria-hidden="true" tabindex="-1"></a>ventjoinby72 <span class="ot">&lt;-</span> <span class="fu">join_by</span>(mrn, enc_id, <span class="fu">overlaps</span>(x<span class="sc">$</span>icu_start_date, x<span class="sc">$</span>t72,</span>
<span id="cb24-518"><a href="#cb24-518" aria-hidden="true" tabindex="-1"></a>                                            y<span class="sc">$</span>vent_time_start, y<span class="sc">$</span>vent_time_stop))</span>
<span id="cb24-519"><a href="#cb24-519" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-520"><a href="#cb24-520" aria-hidden="true" tabindex="-1"></a>df_vent_temp24 <span class="ot">&lt;-</span> <span class="fu">inner_join</span>(df_temp, df_vent_temp, <span class="at">by =</span> ventjoinby24) <span class="sc">%&gt;%</span> </span>
<span id="cb24-521"><a href="#cb24-521" aria-hidden="true" tabindex="-1"></a>     <span class="fu">mutate</span>(<span class="at">vent24 =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb24-522"><a href="#cb24-522" aria-hidden="true" tabindex="-1"></a>     <span class="fu">select</span>(mrn, enc_id, icu_start_date, icu_stop_date, vent24, vent_time_start, vent_time_stop) <span class="sc">%&gt;%</span> </span>
<span id="cb24-523"><a href="#cb24-523" aria-hidden="true" tabindex="-1"></a>     <span class="fu">distinct</span>()</span>
<span id="cb24-524"><a href="#cb24-524" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-525"><a href="#cb24-525" aria-hidden="true" tabindex="-1"></a>df_vent_temp72 <span class="ot">&lt;-</span> <span class="fu">inner_join</span>(df_temp, df_vent_temp, <span class="at">by =</span> ventjoinby72) <span class="sc">%&gt;%</span> </span>
<span id="cb24-526"><a href="#cb24-526" aria-hidden="true" tabindex="-1"></a>     <span class="fu">mutate</span>(<span class="at">vent72 =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb24-527"><a href="#cb24-527" aria-hidden="true" tabindex="-1"></a>     <span class="fu">select</span>(mrn, enc_id, icu_start_date, icu_stop_date, vent72, vent_time_start, vent_time_stop)<span class="sc">%&gt;%</span> </span>
<span id="cb24-528"><a href="#cb24-528" aria-hidden="true" tabindex="-1"></a>     <span class="fu">distinct</span>()</span>
<span id="cb24-529"><a href="#cb24-529" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-530"><a href="#cb24-530" aria-hidden="true" tabindex="-1"></a>df_early_vent <span class="ot">&lt;-</span> <span class="fu">full_join</span>(df_vent_temp24, df_vent_temp72) <span class="sc">%&gt;%</span> </span>
<span id="cb24-531"><a href="#cb24-531" aria-hidden="true" tabindex="-1"></a>     <span class="fu">relocate</span>(vent24, vent72, <span class="at">.after =</span> enc_id) </span>
<span id="cb24-532"><a href="#cb24-532" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-533"><a href="#cb24-533" aria-hidden="true" tabindex="-1"></a><span class="co"># Now add this into the PT record</span></span>
<span id="cb24-534"><a href="#cb24-534" aria-hidden="true" tabindex="-1"></a>df_pt_counts <span class="ot">&lt;-</span> <span class="fu">left_join</span>(df_pt_counts, df_early_vent)<span class="sc">%&gt;%</span> </span>
<span id="cb24-535"><a href="#cb24-535" aria-hidden="true" tabindex="-1"></a>     <span class="fu">mutate</span>(<span class="at">vent24 =</span> <span class="fu">replace_na</span>(vent24, <span class="cn">FALSE</span>),</span>
<span id="cb24-536"><a href="#cb24-536" aria-hidden="true" tabindex="-1"></a>            <span class="at">vent72 =</span> <span class="fu">replace_na</span>(vent72, <span class="cn">FALSE</span>)) </span>
<span id="cb24-537"><a href="#cb24-537" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-538"><a href="#cb24-538" aria-hidden="true" tabindex="-1"></a><span class="co"># Now display tables of each.</span></span>
<span id="cb24-539"><a href="#cb24-539" aria-hidden="true" tabindex="-1"></a>df_pt_counts <span class="sc">%&gt;%</span> </span>
<span id="cb24-540"><a href="#cb24-540" aria-hidden="true" tabindex="-1"></a>     <span class="fu">tbl_summary</span>(<span class="at">include =</span> <span class="fu">c</span>(<span class="st">'vent24'</span>, <span class="fu">starts_with</span>(<span class="st">'n_'</span>)),</span>
<span id="cb24-541"><a href="#cb24-541" aria-hidden="true" tabindex="-1"></a>                 <span class="at">by =</span> <span class="st">'vent24'</span>,</span>
<span id="cb24-542"><a href="#cb24-542" aria-hidden="true" tabindex="-1"></a>                 <span class="at">label =</span> <span class="fu">list</span>(n_early_pt <span class="sc">~</span> <span class="st">'Early PT (within 72 hours)'</span>,</span>
<span id="cb24-543"><a href="#cb24-543" aria-hidden="true" tabindex="-1"></a>                              n_icu_pt <span class="sc">~</span> <span class="st">'PT any time in the ICU'</span>,</span>
<span id="cb24-544"><a href="#cb24-544" aria-hidden="true" tabindex="-1"></a>                              n_any_pt <span class="sc">~</span> <span class="st">'PT any time in the hospital'</span>,</span>
<span id="cb24-545"><a href="#cb24-545" aria-hidden="true" tabindex="-1"></a>                              n_pt0_24 <span class="sc">~</span> <span class="st">'PT within 0-24 hours'</span>,</span>
<span id="cb24-546"><a href="#cb24-546" aria-hidden="true" tabindex="-1"></a>                              n_pt24_48 <span class="sc">~</span> <span class="st">'PT within 24-48 hours'</span>,</span>
<span id="cb24-547"><a href="#cb24-547" aria-hidden="true" tabindex="-1"></a>                              n_pt48_72 <span class="sc">~</span> <span class="st">'PT within 48-72 hours'</span>,</span>
<span id="cb24-548"><a href="#cb24-548" aria-hidden="true" tabindex="-1"></a>                              n_pt_each <span class="sc">~</span> <span class="st">'Early PT on any 2 days'</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb24-549"><a href="#cb24-549" aria-hidden="true" tabindex="-1"></a>     <span class="fu">modify_spanning_header</span>(<span class="fu">all_stat_cols</span>() <span class="sc">~</span> <span class="st">'**IMV within first 24 hours of PICU**'</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb24-550"><a href="#cb24-550" aria-hidden="true" tabindex="-1"></a>     <span class="fu">add_p</span>()</span>
<span id="cb24-551"><a href="#cb24-551" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-552"><a href="#cb24-552" aria-hidden="true" tabindex="-1"></a><span class="co"># Now display tables of each.</span></span>
<span id="cb24-553"><a href="#cb24-553" aria-hidden="true" tabindex="-1"></a>df_pt_counts <span class="sc">%&gt;%</span> </span>
<span id="cb24-554"><a href="#cb24-554" aria-hidden="true" tabindex="-1"></a>     <span class="fu">tbl_summary</span>(<span class="at">include =</span> <span class="fu">c</span>(<span class="st">'vent72'</span>, <span class="fu">starts_with</span>(<span class="st">'n_'</span>)),</span>
<span id="cb24-555"><a href="#cb24-555" aria-hidden="true" tabindex="-1"></a>                 <span class="at">by =</span> <span class="st">'vent72'</span>,</span>
<span id="cb24-556"><a href="#cb24-556" aria-hidden="true" tabindex="-1"></a>                 <span class="at">label =</span> <span class="fu">list</span>(n_early_pt <span class="sc">~</span> <span class="st">'Early PT (within 72 hours)'</span>,</span>
<span id="cb24-557"><a href="#cb24-557" aria-hidden="true" tabindex="-1"></a>                              n_icu_pt <span class="sc">~</span> <span class="st">'PT any time in the ICU'</span>,</span>
<span id="cb24-558"><a href="#cb24-558" aria-hidden="true" tabindex="-1"></a>                              n_any_pt <span class="sc">~</span> <span class="st">'PT any time in the hospital'</span>,</span>
<span id="cb24-559"><a href="#cb24-559" aria-hidden="true" tabindex="-1"></a>                              n_pt0_24 <span class="sc">~</span> <span class="st">'PT within 0-24 hours'</span>,</span>
<span id="cb24-560"><a href="#cb24-560" aria-hidden="true" tabindex="-1"></a>                              n_pt24_48 <span class="sc">~</span> <span class="st">'PT within 24-48 hours'</span>,</span>
<span id="cb24-561"><a href="#cb24-561" aria-hidden="true" tabindex="-1"></a>                              n_pt48_72 <span class="sc">~</span> <span class="st">'PT within 48-72 hours'</span>,</span>
<span id="cb24-562"><a href="#cb24-562" aria-hidden="true" tabindex="-1"></a>                              n_pt_each <span class="sc">~</span> <span class="st">'Early PT on any 2 days'</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb24-563"><a href="#cb24-563" aria-hidden="true" tabindex="-1"></a>     <span class="fu">modify_spanning_header</span>(<span class="fu">all_stat_cols</span>() <span class="sc">~</span> <span class="st">'**IMV within first 72 hours of PICU**'</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb24-564"><a href="#cb24-564" aria-hidden="true" tabindex="-1"></a>     <span class="fu">add_p</span>()</span>
<span id="cb24-565"><a href="#cb24-565" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-566"><a href="#cb24-566" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-567"><a href="#cb24-567" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb24-568"><a href="#cb24-568" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-569"><a href="#cb24-569" aria-hidden="true" tabindex="-1"></a><span class="fu"># Table 1</span></span>
<span id="cb24-570"><a href="#cb24-570" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-571"><a href="#cb24-571" aria-hidden="true" tabindex="-1"></a>We will now begin generating some basic tables</span>
<span id="cb24-572"><a href="#cb24-572" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-573"><a href="#cb24-573" aria-hidden="true" tabindex="-1"></a>Not used</span>
<span id="cb24-574"><a href="#cb24-574" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-577"><a href="#cb24-577" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb24-578"><a href="#cb24-578" aria-hidden="true" tabindex="-1"></a><span class="co"># tabyl(df_early_pt_firstpicu, early_pt)</span></span>
<span id="cb24-579"><a href="#cb24-579" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb24-580"><a href="#cb24-580" aria-hidden="true" tabindex="-1"></a><span class="co"># # Now try to sum all the active types of PT</span></span>
<span id="cb24-581"><a href="#cb24-581" aria-hidden="true" tabindex="-1"></a><span class="co"># df_pt_active &lt;- df_pt_wide %&gt;%</span></span>
<span id="cb24-582"><a href="#cb24-582" aria-hidden="true" tabindex="-1"></a><span class="co">#      mutate(across(where(is.numeric), ~ replace_na(.x, 0))) %&gt;%</span></span>
<span id="cb24-583"><a href="#cb24-583" aria-hidden="true" tabindex="-1"></a><span class="co">#      mutate(pt_active_time = gait_training_time_entry + therapeutic_exercise_time_entry + wheelchair_management_time_entry +</span></span>
<span id="cb24-584"><a href="#cb24-584" aria-hidden="true" tabindex="-1"></a><span class="co">#                  neuromuscular_re_education_time_entry + therapeutic_exercise_comments + gait_training_comments +</span></span>
<span id="cb24-585"><a href="#cb24-585" aria-hidden="true" tabindex="-1"></a><span class="co">#                  orthotic_prosthetic_management_and_or_training_time_entry + prosthetic_training_time_entry) %&gt;%</span></span>
<span id="cb24-586"><a href="#cb24-586" aria-hidden="true" tabindex="-1"></a><span class="co">#      ungroup() %&gt;%</span></span>
<span id="cb24-587"><a href="#cb24-587" aria-hidden="true" tabindex="-1"></a><span class="co">#      select(mrn, enc_id, recorded_time, pt_active_time) %&gt;%</span></span>
<span id="cb24-588"><a href="#cb24-588" aria-hidden="true" tabindex="-1"></a><span class="co">#      filter(pt_active_time &gt; 0)</span></span>
<span id="cb24-589"><a href="#cb24-589" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb24-590"><a href="#cb24-590" aria-hidden="true" tabindex="-1"></a><span class="co"># # Do the same kind of inequality join as before, ensuring the PT is after PICU start</span></span>
<span id="cb24-591"><a href="#cb24-591" aria-hidden="true" tabindex="-1"></a><span class="co"># df_pt_active_picu &lt;- left_join(df_temp, df_pt_active, by = pt_join_by, relationship = "many-to-many")</span></span>
<span id="cb24-592"><a href="#cb24-592" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb24-593"><a href="#cb24-593" aria-hidden="true" tabindex="-1"></a><span class="co"># # Determine whether patients had PT in each of the intervals</span></span>
<span id="cb24-594"><a href="#cb24-594" aria-hidden="true" tabindex="-1"></a><span class="co"># df_early_pt_active &lt;- df_pt_active_picu %&gt;%</span></span>
<span id="cb24-595"><a href="#cb24-595" aria-hidden="true" tabindex="-1"></a><span class="co">#      mutate(early_pt_active = if_else(recorded_time %within% int0_72, TRUE, FALSE)) %&gt;%</span></span>
<span id="cb24-596"><a href="#cb24-596" aria-hidden="true" tabindex="-1"></a><span class="co">#      group_by(mrn, enc_id, icu_start_date) %&gt;%</span></span>
<span id="cb24-597"><a href="#cb24-597" aria-hidden="true" tabindex="-1"></a><span class="co">#      filter(early_pt_active == max(early_pt_active)) %&gt;%</span></span>
<span id="cb24-598"><a href="#cb24-598" aria-hidden="true" tabindex="-1"></a><span class="co">#      ungroup() %&gt;%</span></span>
<span id="cb24-599"><a href="#cb24-599" aria-hidden="true" tabindex="-1"></a><span class="co">#      distinct(mrn, enc_id, icu_start_date, early_pt_active)</span></span>
<span id="cb24-600"><a href="#cb24-600" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb24-601"><a href="#cb24-601" aria-hidden="true" tabindex="-1"></a><span class="co"># tabyl(df_early_pt_active, early_pt_active)</span></span>
<span id="cb24-602"><a href="#cb24-602" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-603"><a href="#cb24-603" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->




</body></html>